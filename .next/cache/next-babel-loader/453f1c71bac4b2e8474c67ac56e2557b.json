{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Sackky\\\\Desktop\\\\govermentlt\\\\pages\\\\login.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport Router, { useRouter } from 'next/router';\n/* utils */\n\nimport { apiInstance, checkIsLogin } from '../middleware/utils';\nimport Cookies from 'js-cookie';\n/* components */\n\nimport Layout from '../components/layout/LayoutDefaultStyle2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { fas } from '@fortawesome/free-solid-svg-icons';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { useEffect, useState } from 'react';\nlibrary.add(fas);\nimport { Carousel, Row, Col, Typography, Image, Button, Input, Card, Form, notification } from 'antd';\nvar Text = Typography.Text,\n    Title = Typography.Title;\nvar TextArea = Input.TextArea;\nexport var __N_SSP = true;\nexport default function Login(props) {\n  _s();\n\n  var _jsx, _jsx2;\n\n  var origin = props.origin,\n      baseApiUrl = props.baseApiUrl;\n\n  var _notification$useNoti = notification.useNotification(),\n      _notification$useNoti2 = _slicedToArray(_notification$useNoti, 2),\n      api = _notification$useNoti2[0],\n      contextHolder = _notification$useNoti2[1];\n\n  useEffect(function () {\n    fetchUserLogin();\n  }, []);\n\n  function fetchUserLogin() {\n    return _fetchUserLogin.apply(this, arguments);\n  }\n\n  function _fetchUserLogin() {\n    _fetchUserLogin = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var userLogin, dateNow;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return checkIsLogin();\n\n            case 2:\n              userLogin = _context.sent;\n              console.log(userLogin);\n              dateNow = new Date();\n\n              if (userLogin) {\n                if (parseInt(userLogin.exp) > parseInt(dateNow.getTime().toString().substring(0, 10))) {\n                  Router.push('/admin/dashborad');\n                }\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchUserLogin.apply(this, arguments);\n  }\n\n  function onSubmitHandler(_x) {\n    return _onSubmitHandler.apply(this, arguments);\n  }\n\n  function _onSubmitHandler() {\n    _onSubmitHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value) {\n      var data, loginData;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              data = {\n                user_name: value.username,\n                password: value.password\n              }; // Call an external API endpoint to get posts.\n              // You can use any data fetching library\n              // const loginApi = await fetch(`${baseApiUrl}/auth`, {\n              //   method: 'POST',\n              //   headers: {\n              //     Accept: 'application/json',\n              //     'Content-Type': 'application/json',\n              //   },\n              //   body: JSON.stringify(data),\n              // }).catch(error => {\n              //   console.error('Error:', error);\n              // });\n\n              _context2.next = 3;\n              return apiInstance().post('/auth', data);\n\n            case 3:\n              loginData = _context2.sent;\n\n              if (loginData.data.status == 200) {\n                openNotificationRegisterSuccess(); // เดวมี function ต่อ\n\n                Cookies.set('token', loginData.data.token); // window.location.href = referer ? referer : \"/\";\n                // const pathUrl = referer ? referer.lastIndexOf(\"/\") : \"/\";\n\n                Router.push('/admin/dashborad');\n              } else {\n                openNotificationRegisterFail(loginData.data.message);\n              }\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _onSubmitHandler.apply(this, arguments);\n  }\n\n  var openNotificationRegisterSuccess = function openNotificationRegisterSuccess() {\n    api.success({\n      message: \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E40\\u0E23\\u0E35\\u0E22\\u0E1A\\u0E23\\u0E49\\u0E2D\\u0E22\",\n      description: 'เข้าสู่ระบบเรียบร้อยแล้ว',\n      placement: 'topRight'\n    });\n  };\n\n  var openNotificationRegisterFail = function openNotificationRegisterFail(messgae) {\n    api.error({\n      message: \"\\u0E1E\\u0E1A\\u0E1B\\u0E31\\u0E0D\\u0E2B\\u0E32\\u0E23\\u0E30\\u0E2B\\u0E27\\u0E48\\u0E32\\u0E07\\u0E01\\u0E32\\u0E23\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\",\n      description: messgae,\n      placement: 'topRight'\n    });\n  };\n\n  return __jsx(Layout, {\n    title: \"Government | Login Page\",\n    url: origin,\n    origin: origin,\n    className: \"h-screen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, contextHolder, __jsx(\"div\", {\n    className: \"mx-auto w-full max-w-sm bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 py-8 min-h-3/4 mt-2 border-2 border-gray-200 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, __jsx(Form, {\n    name: \"basic\" // className=\"w-96\"\n    // initialValues={{ email: email, invitationCode: code }}\n    ,\n    layout: \"vertical\",\n    onFinish: onSubmitHandler // onFinishFailed={onFinishFailed}\n    ,\n    requiredMark: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"flex items-center justify-between mt-2 mr-2 ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    href: \"/\",\n    className: \"text-black no-underline hover:text-green-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, __jsx(FontAwesomeIcon, {\n    icon: ['fas', 'long-arrow-alt-left'],\n    className: \"mr-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }), \"\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\")), __jsx(\"p\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E1A\\u0E31\\u0E0D\\u0E0A\\u0E35\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49 ?\", __jsx(\"a\", {\n    href: \"register\",\n    className: \"text-black no-underline hover:text-green-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, \"\\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\\u0E2A\\u0E21\\u0E32\\u0E0A\\u0E34\\u0E01\"))), __jsx(\"div\", {\n    className: \"text-left mt-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    className: \"text-xl font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"), __jsx(\"p\", {\n    className: \"text-gray-400 text-opacity-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E43\\u0E0A\\u0E49\\u0E07\\u0E32\\u0E19\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E40\\u0E27\\u0E47\\u0E1A\\u0E44\\u0E0B\\u0E15\\u0E4C\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\\u0E23\\u0E39\\u0E1B\")), __jsx(Form.Item, (_jsx = {\n    className: \"mb-4\",\n    name: \"username\" //  label=\"รหัสผ่าน\"\n\n  }, _defineProperty(_jsx, \"className\", \"block text-gray-700 text-sm font-bold mb-2 w-full\"), _defineProperty(_jsx, \"rules\", [{\n    required: true,\n    message: 'กรุณากรอก ชื่อผู้ใช้!'\n  }]), _defineProperty(_jsx, \"__self\", this), _defineProperty(_jsx, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 11\n  }), _jsx), __jsx(\"input\", {\n    // name=\"user_name\"\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    type: \"text\",\n    size: \"large\",\n    placeholder: \"Username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  })), __jsx(Form.Item, (_jsx2 = {\n    className: \"mb-4\",\n    name: \"password\" //  label=\"รหัสผ่าน\"\n\n  }, _defineProperty(_jsx2, \"className\", \"block text-gray-700 text-sm font-bold mb-2 w-full\"), _defineProperty(_jsx2, \"rules\", [{\n    required: true,\n    message: 'กรุณากรอก รหัสผ่าน!'\n  }]), _defineProperty(_jsx2, \"__self\", this), _defineProperty(_jsx2, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 11\n  }), _jsx2), __jsx(\"input\", {\n    // name=\"password\"\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    type: \"password\",\n    size: \"large\",\n    placeholder: \"Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  })), __jsx(Form.Item, {\n    className: \"flex mt-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, __jsx(\"label\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    className: \"form-checkbox mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }), \"\\u0E08\\u0E14\\u0E08\\u0E33\\u0E09\\u0E31\\u0E19\"))), __jsx(Form.Item, {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, __jsx(Button // type=\"primary\"\n  , {\n    style: {\n      backgroundColor: '#059669',\n      borderColor: '#059669',\n      height: 40,\n      marginBottom: '0px !important'\n    },\n    htmlType: \"submit\" // tbgreen\n    ,\n    className: \"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full\" // style={{ height: 40 }}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, __jsx(Text, {\n    className: \"text-custom-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 15\n    }\n  }, \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\")), __jsx(\"a\", {\n    href: \"/forget_password\",\n    className: \"text-gray-400 hover:text-gray-800 px-10 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, \"\\u0E25\\u0E37\\u0E21\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19?\")))));\n}\n/* getServerSideProps */\n\n_s(Login, \"GM6YPxt7RRGQ43tVyaoFMni7I+k=\", false, function () {\n  return [notification.useNotification];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/Sackky/Desktop/govermentlt/pages/login.js"],"names":["Link","Router","useRouter","apiInstance","checkIsLogin","Cookies","Layout","FontAwesomeIcon","fas","library","useEffect","useState","add","Carousel","Row","Col","Typography","Image","Button","Input","Card","Form","notification","Text","Title","TextArea","Login","props","origin","baseApiUrl","useNotification","api","contextHolder","fetchUserLogin","userLogin","console","log","dateNow","Date","parseInt","exp","getTime","toString","substring","push","onSubmitHandler","value","data","user_name","username","password","post","loginData","status","openNotificationRegisterSuccess","set","token","openNotificationRegisterFail","message","success","description","placement","messgae","error","required","backgroundColor","borderColor","height","marginBottom"],"mappings":"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","sourcesContent":["import Link from 'next/link';\r\nimport Router, { useRouter } from 'next/router';\r\n/* utils */\r\nimport { absoluteUrl, apiInstance, checkIsLogin } from '../middleware/utils';\r\nimport Cookies from 'js-cookie';\r\n/* components */\r\nimport Layout from '../components/layout/LayoutDefaultStyle2';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { fas } from '@fortawesome/free-solid-svg-icons';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { useEffect, useState } from 'react'\r\n\r\nlibrary.add(fas);\r\n\r\nimport {\r\n  Carousel,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Image,\r\n  Button,\r\n  Input,\r\n  Card,\r\n  Form,\r\n  notification\r\n} from 'antd';\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nconst { TextArea } = Input;\r\n\r\nexport default function Login(props) {\r\n  const { origin, baseApiUrl } = props;\r\n  const [api, contextHolder] = notification.useNotification();\r\n\r\n  useEffect(() => {\r\n    fetchUserLogin()\r\n  }, [])\r\n\r\n  async function fetchUserLogin() {\r\n    const userLogin = await checkIsLogin()\r\n    console.log(userLogin)\r\n    var dateNow = new Date();\r\n    if (userLogin) {\r\n      if (parseInt(userLogin.exp) > parseInt((dateNow.getTime()).toString().substring(0, 10))) {\r\n        Router.push('/admin/dashborad');\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n  async function onSubmitHandler(value) {\r\n    const data = {\r\n      user_name: value.username,\r\n      password: value.password\r\n    };\r\n    // Call an external API endpoint to get posts.\r\n    // You can use any data fetching library\r\n    // const loginApi = await fetch(`${baseApiUrl}/auth`, {\r\n    //   method: 'POST',\r\n    //   headers: {\r\n    //     Accept: 'application/json',\r\n    //     'Content-Type': 'application/json',\r\n    //   },\r\n    //   body: JSON.stringify(data),\r\n    // }).catch(error => {\r\n    //   console.error('Error:', error);\r\n    // });\r\n    const loginData = await apiInstance().post('/auth', data);\r\n    if (loginData.data.status == 200) {\r\n      openNotificationRegisterSuccess()\r\n      // เดวมี function ต่อ\r\n      Cookies.set('token', loginData.data.token);\r\n      // window.location.href = referer ? referer : \"/\";\r\n      // const pathUrl = referer ? referer.lastIndexOf(\"/\") : \"/\";\r\n      Router.push('/admin/dashborad');\r\n    } else {\r\n      openNotificationRegisterFail(loginData.data.message)\r\n\r\n    }\r\n\r\n  }\r\n\r\n  const openNotificationRegisterSuccess = () => {\r\n    api.success({\r\n      message: `เข้าสู่ระบบเรียบร้อย`,\r\n      description: 'เข้าสู่ระบบเรียบร้อยแล้ว',\r\n      placement: 'topRight',\r\n    });\r\n  };\r\n\r\n  const openNotificationRegisterFail = (messgae) => {\r\n    api.error({\r\n      message: `พบปัญหาระหว่างการเข้าสู่ระบบ`,\r\n      description: messgae,\r\n      placement: 'topRight',\r\n    });\r\n  };\r\n  return (\r\n    <Layout title=\"Government | Login Page\" url={origin} origin={origin} className=\"h-screen\">\r\n      {contextHolder}\r\n      {/* <div className=\"mx-auto text-black rounded-xl shadow-xl w-96\">\r\n        <TextArea\r\n          placeholder=\"ชื่อ-สกุล\"\r\n        />\r\n        <Button className=\"lg:inline-flex lg:w-auto w-full px-3 py-2 rounded-full h-8 text-white bg-transparent font-bold items-center justify-center hover:bg-white-500 hover:text-white py-2 px-4 border border-white-500 \">\r\n          ขอใบเสนอราคา\r\n        </Button>\r\n      </div> */}\r\n      <div className=\"mx-auto w-full max-w-sm bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 py-8 min-h-3/4 mt-2 border-2 border-gray-200 \">\r\n        <Form\r\n          name=\"basic\"\r\n          // className=\"w-96\"\r\n          // initialValues={{ email: email, invitationCode: code }}\r\n          layout=\"vertical\"\r\n          onFinish={onSubmitHandler}\r\n          // onFinishFailed={onFinishFailed}\r\n          requiredMark={true}\r\n        >\r\n          <div className=\"flex items-center justify-between mt-2 mr-2 ml-2\">\r\n            <p className=\"\">\r\n              <a\r\n                href=\"/\"\r\n                className=\"text-black no-underline hover:text-green-500\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={['fas', 'long-arrow-alt-left']}\r\n                  className=\"mr-1\"\r\n                />\r\n                กลับหน้าหลัก\r\n              </a>\r\n            </p>\r\n            <p className=\"\">\r\n              ยังไม่บัญชีผู้ใช้ ?\r\n              <a\r\n                href=\"register\"\r\n                className=\"text-black no-underline hover:text-green-500\"\r\n              >\r\n                สมัครสมาชิก\r\n              </a>\r\n            </p>\r\n          </div>\r\n          <div className=\"text-left mt-8\">\r\n            <p className=\"text-xl font-bold\">เข้าสู่ระบบ</p>\r\n            <p className=\"text-gray-400 text-opacity-100\">\r\n              เข้าสู่ระบบเพื่อใช้งานระบบเว็บไซต์หน่วยงานสำเร็จรูป\r\n            </p>\r\n          </div>\r\n          <Form.Item className=\"mb-4\"\r\n            name=\"username\"\r\n            //  label=\"รหัสผ่าน\"\r\n            className=\"block text-gray-700 text-sm font-bold mb-2 w-full\"\r\n            rules={[{ required: true, message: 'กรุณากรอก ชื่อผู้ใช้!' }]}\r\n          >\r\n            <input\r\n              // name=\"user_name\"\r\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n              type=\"text\"\r\n              size=\"large\"\r\n              placeholder=\"Username\"\r\n            ></input>\r\n          </Form.Item>\r\n          <Form.Item className=\"mb-4\"\r\n            name=\"password\"\r\n            //  label=\"รหัสผ่าน\"\r\n            className=\"block text-gray-700 text-sm font-bold mb-2 w-full\"\r\n            rules={[{ required: true, message: 'กรุณากรอก รหัสผ่าน!' }]}\r\n          >\r\n            <input\r\n              // name=\"password\"\r\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n              type=\"password\"\r\n              size=\"large\"\r\n              placeholder=\"Password\"\r\n            />\r\n          </Form.Item>\r\n          <Form.Item className=\"flex mt-6\">\r\n            <label className=\"flex items-center\">\r\n              <p className=\"\">\r\n                <input type=\"checkbox\" className=\"form-checkbox mr-2\"></input>\r\n                จดจำฉัน\r\n              </p>\r\n            </label>\r\n          </Form.Item>\r\n          <Form.Item className=\"text-center\">\r\n            <Button\r\n              // type=\"primary\"\r\n              style={{\r\n                backgroundColor: '#059669',\r\n                borderColor: '#059669',\r\n                height: 40,\r\n                marginBottom: '0px !important',\r\n              }}\r\n              htmlType=\"submit\"\r\n              // tbgreen\r\n              className=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full\"\r\n            // style={{ height: 40 }}\r\n            >\r\n              <Text\r\n                className=\"text-custom-white\"\r\n              >\r\n                เข้าสู่ระบบ\r\n              </Text>\r\n            </Button>\r\n\r\n            <a href=\"/forget_password\" className=\"text-gray-400 hover:text-gray-800 px-10 \">\r\n              ลืมรหัสผ่าน?\r\n            </a>\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n/* getServerSideProps */\r\nexport async function getServerSideProps(context) {\r\n  const { req } = context;\r\n  const { origin } = absoluteUrl(req);\r\n\r\n  const referer = req.headers.referer || '';\r\n  const baseApiUrl = `${origin}/api`;\r\n\r\n  return {\r\n    props: {\r\n      origin,\r\n      baseApiUrl,\r\n      referer,\r\n    },\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}