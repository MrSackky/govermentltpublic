{"ast":null,"code":"var _jsxFileName = \"D:\\\\govermentlt\\\\pages\\\\admin\\\\setting\\\\profile\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { InboxOutlined } from '@ant-design/icons';\nimport { Button, Form, Image, Input, notification, Select, Typography, Upload } from 'antd';\nimport axios from 'axios';\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/router'; // import UserNav from '../components/navigation/User';\n\nimport React, { useEffect, useState } from 'react';\n/* components */\n\nimport Layout from '../../../../components/layout/LayoutAdmin';\n/* utils */\n\nimport { absoluteUrl, apiInstance } from '../../../../middleware/utils';\nconst JoditEditor = dynamic(() => import(\"jodit-react\"), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"jodit-react\")],\n    modules: [\"jodit-react\"]\n  }\n});\nconst {\n  Text,\n  Title\n} = Typography;\nconst {\n  Option\n} = Select;\nconst {\n  TextArea\n} = Input;\n\nconst config = require('../../config');\n\nexport default function Home(props) {\n  const [api, contextHolder] = notification.useNotification();\n  const {\n    user,\n    origin\n  } = props;\n  const router = useRouter();\n  const {\n    profileId\n  } = router.query;\n  const {\n    0: provinces,\n    1: setProvinces\n  } = useState(null);\n  const {\n    0: districts,\n    1: setDistricts\n  } = useState(null);\n  const {\n    0: subDistricts,\n    1: setSubDistricts\n  } = useState(null);\n  const {\n    0: previewImageLogo,\n    1: setPreviewImageLogo\n  } = useState(null);\n  const {\n    0: imageLandingPageLogo,\n    1: setImageLandingPageLogo\n  } = useState(null);\n  const {\n    0: previewVisibleLogo,\n    1: setPreviewVisibleLogo\n  } = useState(false);\n  const {\n    0: logo,\n    1: setLogo\n  } = useState(false);\n  const {\n    0: fields,\n    1: setFields\n  } = useState([]);\n  const {\n    0: organizationData,\n    1: setOrganizationData\n  } = useState(null);\n  useEffect(() => {\n    fetchOrganizationData();\n  }, []);\n\n  async function onSubmitHandler(value) {\n    const data = {\n      organization_id: user.organization_id,\n      organization_name: value.organization_name,\n      organization_name_eng: value.organization_name_eng,\n      organization_logo: imageLandingPageLogo\n    };\n    console.log(data);\n    const organizationData = await apiInstance().put('/profile', data);\n\n    if (organizationData.data.status == 200) {\n      openNotificationRegisterSuccess();\n      fetchOrganizationData();\n      setTimeout(function () {\n        //Start the timer\n        router.push('/admin/setting/profile');\n      }.bind(this), 2000);\n    } else {\n      openNotificationRegisterFail(organizationData.data.message);\n    }\n  }\n\n  const openNotificationRegisterSuccess = () => {\n    api.success({\n      message: `บันทึกข้อมูลสำเร็จ`,\n      description: 'บันทึกข้อมูลสำเร็จแล้ว',\n      placement: 'topRight'\n    });\n  };\n\n  const openNotificationRegisterFail = messgae => {\n    api.error({\n      message: `พบปัญหาระหว่างการบันทึกข้อมูล`,\n      description: messgae,\n      placement: 'topRight'\n    });\n  };\n\n  const {\n    Dragger\n  } = Upload;\n  const [form] = Form.useForm();\n\n  const onReset = () => {\n    setFields([{\n      name: ['organization_logo'],\n      value: organizationData.organization_logo\n    }, {\n      name: ['organization_name'],\n      value: organizationData.organization_name\n    }, {\n      name: ['organization_name_eng'],\n      value: organizationData.organization_name_eng\n    }]);\n    setPreviewImageLogo('..\\\\..\\\\..\\\\uploads\\\\c-' + user.organization_id + '\\\\organization\\\\' + organizationData.organization_logo);\n    setPreviewVisibleLogo(true);\n    setImageLandingPageLogo(organizationData.organization_logo);\n  };\n\n  const fetchOrganizationData = async () => {\n    const _organizationData = await apiInstance().get('organization/' + (user ? user.organization_id : 0));\n\n    setOrganizationData(_organizationData.data.organization);\n\n    if (_organizationData.data.organization.organization_logo) {\n      setPreviewImageLogo('..\\\\..\\\\..\\\\uploads\\\\c-' + user.organization_id + '\\\\organization\\\\' + _organizationData.data.organization.organization_logo);\n      setPreviewVisibleLogo(true);\n    }\n\n    setFields([{\n      name: ['organization_name'],\n      value: _organizationData.data.organization.organization_name ? _organizationData.data.organization.organization_name : \"\"\n    }, {\n      name: ['organization_name_eng'],\n      value: _organizationData.data.organization.organization_name_eng ? _organizationData.data.organization.organization_name_eng : \"\"\n    }]);\n  };\n\n  const imageUploadpropsLogo = {\n    name: 'file',\n    multiple: false,\n    listType: 'text',\n    maxCount: 1,\n    action: \"/api/upload/organization\",\n    preview: false,\n    customRequest: options => {\n      const data = new FormData();\n      data.append('file', options.file);\n      data.append('id', user.type_user == 1 ? \"admin\" : user.organization_id);\n      const config = {\n        \"headers\": {\n          \"content-type\": 'multipart/form-data; boundary=----WebKitFormBoundaryqTqJIxvkWFYqvP5s'\n        }\n      };\n      axios.post(options.action, data, config).then(res => {\n        setImageLandingPageLogo(res.data.data.list[0]._name);\n        options.onSuccess(res.data, options.file);\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n\n    async onChange(info) {\n      const {\n        status\n      } = info.file;\n\n      switch (info.file.status) {\n        case \"done\":\n          if (!info.file.url && !info.file.preview) {\n            info.file.preview = await getBase64(info.file.originFileObj);\n          }\n\n          setPreviewImageLogo(info.file.url || info.file.preview);\n          setPreviewVisibleLogo(true);\n          break;\n\n        default: // error or removed\n        // resetImagePreview()\n\n      }\n    },\n\n    onRemove(info) {\n      console.log(\"onRemove\");\n      console.log(info);\n      resetImagePreview();\n    }\n\n  };\n\n  const resetImagePreview = () => {\n    setPreviewVisibleLogo(false);\n    setPreviewImageLogo(null);\n  };\n\n  function getBase64(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = () => resolve(reader.result);\n\n      reader.onerror = error => reject(error);\n    });\n  }\n\n  return __jsx(Layout, {\n    title: \"Government - Admin management\",\n    url: origin,\n    origin: origin // user={login}\n    ,\n    indexSubMenu: \"6\",\n    indexMenu: \"sub-6-0\",\n    titlePage: \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2D\\u0E07\\u0E04\\u0E4C\\u0E01\\u0E23\",\n    _routes: [{\n      path: '/admin/dashborad',\n      breadcrumbName: 'หน้าหลัก'\n    }, {\n      path: '/admin/setting/profile',\n      breadcrumbName: 'ข้อมูลองค์กร'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 5\n    }\n  }, contextHolder, __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"https://unpkg.com/react-quill@1.3.3/dist/quill.snow.css\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"w-5/6 lg:w-full mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }\n  }, __jsx(Form, {\n    name: \"basic\",\n    layout: \"vertical\",\n    onFinish: onSubmitHandler,\n    requiredMark: true,\n    form: form,\n    fields: fields,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"lg:inline-flex w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"inline-flex lg:w-1/6  pr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    name: \"organization_logo\",\n    className: \"block text-gray-700 text-sm font-bold mb-2 w-auto h-auto text-center w-full\" // rules={[\n    //   {\n    //     required: true,\n    //     message: 'กรุณากรอกเลือกภาพ Logo องค์กร',\n    //   },\n    // ]}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 15\n    }\n  }, __jsx(Dragger, _extends({\n    maxCount: 1 // listType=\"picture\"\n    ,\n    accept: \".jpg, .jpeg, .png\"\n  }, imageUploadpropsLogo, {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }), previewVisibleLogo && __jsx(React.Fragment, null, __jsx(Image // width={200}\n  , {\n    preview: false,\n    src: previewImageLogo,\n    style: {\n      height: '116px',\n      width: 'auto',\n      objectFit: 'cover'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 44\n    }\n  }), __jsx(\"p\", {\n    className: \"text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 21\n    }\n  }, \"\\u0E04\\u0E25\\u0E34\\u0E01 \\u0E2B\\u0E23\\u0E37\\u0E2D \\u0E25\\u0E32\\u0E01\\u0E44\\u0E1F\\u0E25\\u0E4C\\u0E21\\u0E32\\u0E17\\u0E35\\u0E48\\u0E1A\\u0E23\\u0E34\\u0E40\\u0E27\\u0E13\\u0E19\\u0E35\\u0E49\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14 Logo \\u0E2D\\u0E07\\u0E04\\u0E4C\\u0E01\\u0E23\")), !previewVisibleLogo && __jsx(React.Fragment, null, __jsx(\"p\", {\n    className: \"ant-upload-drag-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 21\n    }\n  }, __jsx(InboxOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 23\n    }\n  })), __jsx(\"p\", {\n    className: \"ant-upload-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 21\n    }\n  }, \"\\u0E04\\u0E25\\u0E34\\u0E01 \\u0E2B\\u0E23\\u0E37\\u0E2D \\u0E25\\u0E32\\u0E01\\u0E44\\u0E1F\\u0E25\\u0E4C\\u0E21\\u0E32\\u0E17\\u0E35\\u0E48\\u0E1A\\u0E23\\u0E34\\u0E40\\u0E27\\u0E13\\u0E19\\u0E35\\u0E49\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14 Logo \\u0E2D\\u0E07\\u0E04\\u0E4C\\u0E01\\u0E23\"))))), __jsx(\"div\", {\n    className: \"lg:w-5/6 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    name: \"organization_name\",\n    label: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\",\n    className: \"block text-gray-700 text-sm font-bold mb-2 w-full\",\n    rules: [{\n      required: true,\n      message: 'กรุณากรอกชื่อหน่วยงาน'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 15\n    }\n  }, __jsx(TextArea, {\n    id: \"#\",\n    type: \"text\",\n    placeholder: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\",\n    className: \"resize-none border rounded-md\",\n    autoSize: {\n      minRows: 1,\n      maxRows: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 17\n    }\n  })), __jsx(Form.Item, {\n    name: \"organization_name_eng\",\n    label: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19 \\u0E20\\u0E32\\u0E29\\u0E32\\u0E2D\\u0E31\\u0E07\\u0E01\\u0E24\\u0E29\",\n    className: \"block text-gray-700 text-sm font-bold mb-2 w-full\" // rules={[\n    //   {\n    //     required: true,\n    //     message: 'กรุณากรอกชื่อหน่วยงานภาษาอังกฤษ',\n    //   },\n    // ]}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 15\n    }\n  }, __jsx(TextArea, {\n    id: \"#\",\n    type: \"text\",\n    placeholder: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19 \\u0E20\\u0E32\\u0E29\\u0E32\\u0E2D\\u0E31\\u0E07\\u0E01\\u0E24\\u0E29\",\n    className: \"resize-none border rounded-md\",\n    autoSize: {\n      minRows: 1,\n      maxRows: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 17\n    }\n  })))), __jsx(Form.Item, {\n    className: \"flex mt-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"lg:inline-flex w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"text-center lg:text-right w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    htmlType: \"button\",\n    onClick: onReset,\n    style: {\n      backgroundColor: '#C2CFE0',\n      borderColor: '#C2CFE0',\n      height: 40,\n      width: 110,\n      marginBottom: '0px !important',\n      marginRight: '2px',\n      color: 'white !important'\n    } // htmlType=\"submit\"\n    ,\n    className: \"text-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full lg:w-1/4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 17\n    }\n  }, __jsx(Text, {\n    className: \"text-custom-black \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 19\n    }\n  }, \"\\u0E23\\u0E35\\u0E40\\u0E0B\\u0E47\\u0E17\")), __jsx(Button // type=\"primary\"\n  , {\n    style: {\n      backgroundColor: '#059669',\n      borderColor: '#059669',\n      height: 40,\n      width: 110,\n      marginBottom: '0px !important',\n      color: 'white !important'\n    },\n    htmlType: \"submit\",\n    className: \"text-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full lg:w-1/4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 17\n    }\n  }, __jsx(Text, {\n    className: \"text-custom-white \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 19\n    }\n  }, \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"))))))));\n}\n/* getServerSideProps */\n\nexport async function getServerSideProps(context) {\n  const {\n    req\n  } = context;\n  const {\n    origin\n  } = absoluteUrl(req);\n  return {\n    props: {\n      origin\n    }\n  };\n}","map":{"version":3,"sources":["D:/govermentlt/pages/admin/setting/profile/index.js"],"names":["InboxOutlined","Button","Form","Image","Input","notification","Select","Typography","Upload","axios","dynamic","useRouter","React","useEffect","useState","Layout","absoluteUrl","apiInstance","JoditEditor","ssr","Text","Title","Option","TextArea","config","require","Home","props","api","contextHolder","useNotification","user","origin","router","profileId","query","provinces","setProvinces","districts","setDistricts","subDistricts","setSubDistricts","previewImageLogo","setPreviewImageLogo","imageLandingPageLogo","setImageLandingPageLogo","previewVisibleLogo","setPreviewVisibleLogo","logo","setLogo","fields","setFields","organizationData","setOrganizationData","fetchOrganizationData","onSubmitHandler","value","data","organization_id","organization_name","organization_name_eng","organization_logo","console","log","put","status","openNotificationRegisterSuccess","setTimeout","push","bind","openNotificationRegisterFail","message","success","description","placement","messgae","error","Dragger","form","useForm","onReset","name","_organizationData","get","organization","imageUploadpropsLogo","multiple","listType","maxCount","action","preview","customRequest","options","FormData","append","file","type_user","post","then","res","list","_name","onSuccess","catch","err","onChange","info","url","getBase64","originFileObj","onRemove","resetImagePreview","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","path","breadcrumbName","height","width","objectFit","required","minRows","maxRows","backgroundColor","borderColor","marginBottom","marginRight","color","getServerSideProps","context","req"],"mappings":"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","sourcesContent":["import { InboxOutlined } from '@ant-design/icons';\r\nimport {\r\n  Button, Form, Image, Input, notification, Select, Typography, Upload\r\n} from 'antd';\r\nimport axios from 'axios';\r\nimport dynamic from 'next/dynamic';\r\nimport { useRouter } from 'next/router';\r\n// import UserNav from '../components/navigation/User';\r\nimport React, { useEffect, useState } from 'react';\r\n/* components */\r\nimport Layout from '../../../../components/layout/LayoutAdmin';\r\n/* utils */\r\nimport {\r\n  absoluteUrl, apiInstance\r\n} from '../../../../middleware/utils';\r\n\r\nconst JoditEditor = dynamic(() => import(\"jodit-react\"), { ssr: false });\r\nconst { Text, Title } = Typography;\r\nconst { Option } = Select;\r\n\r\nconst { TextArea } = Input;\r\nconst config = require('../../config');\r\n\r\nexport default function Home(props) {\r\n  const [api, contextHolder] = notification.useNotification();\r\n  const { user, origin } = props;\r\n  const router = useRouter();\r\n  const { profileId } = router.query;\r\n  const [provinces, setProvinces] = useState(null)\r\n  const [districts, setDistricts] = useState(null)\r\n  const [subDistricts, setSubDistricts] = useState(null)\r\n  const [previewImageLogo, setPreviewImageLogo] = useState(null)\r\n  const [imageLandingPageLogo, setImageLandingPageLogo] = useState(null)\r\n  const [previewVisibleLogo, setPreviewVisibleLogo] = useState(false)\r\n  const [logo, setLogo] = useState(false)\r\n  const [fields, setFields] = useState([\r\n  ]);\r\n  const [organizationData, setOrganizationData] = useState(null)\r\n\r\n  useEffect(() => {\r\n    fetchOrganizationData();\r\n  }, []);\r\n\r\n  async function onSubmitHandler(value) {\r\n    const data = {\r\n      organization_id: user.organization_id,\r\n      organization_name: value.organization_name,\r\n      organization_name_eng: value.organization_name_eng,\r\n      organization_logo: imageLandingPageLogo,\r\n    };\r\n    console.log(data)\r\n    const organizationData = await apiInstance().put('/profile', data);\r\n    if (organizationData.data.status == 200) {\r\n      openNotificationRegisterSuccess();\r\n      fetchOrganizationData();\r\n      setTimeout(\r\n        function () {\r\n          //Start the timer\r\n          router.push('/admin/setting/profile');\r\n        }.bind(this),\r\n        2000,\r\n      );\r\n    } else {\r\n      openNotificationRegisterFail(organizationData.data.message);\r\n    }\r\n  }\r\n\r\n\r\n  const openNotificationRegisterSuccess = () => {\r\n    api.success({\r\n      message: `บันทึกข้อมูลสำเร็จ`,\r\n      description: 'บันทึกข้อมูลสำเร็จแล้ว',\r\n      placement: 'topRight',\r\n    });\r\n  };\r\n\r\n  const openNotificationRegisterFail = messgae => {\r\n    api.error({\r\n      message: `พบปัญหาระหว่างการบันทึกข้อมูล`,\r\n      description: messgae,\r\n      placement: 'topRight',\r\n    });\r\n  };\r\n\r\n  const { Dragger } = Upload;\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const onReset = () => {\r\n    setFields([\r\n      {\r\n        name: ['organization_logo'],\r\n        value: organizationData.organization_logo,\r\n      },\r\n      {\r\n        name: ['organization_name'],\r\n        value: organizationData.organization_name,\r\n      },\r\n      {\r\n        name: ['organization_name_eng'],\r\n        value: organizationData.organization_name_eng,\r\n      },\r\n    ]);\r\n    setPreviewImageLogo('..\\\\..\\\\..\\\\uploads\\\\c-' + user.organization_id + '\\\\organization\\\\' + organizationData.organization_logo);\r\n    setPreviewVisibleLogo(true);\r\n    setImageLandingPageLogo(organizationData.organization_logo);\r\n  };\r\n\r\n  const fetchOrganizationData = async () => {\r\n\r\n    const _organizationData = await apiInstance().get(\r\n      'organization/' + (user ? user.organization_id : 0)\r\n    );\r\n    setOrganizationData(_organizationData.data.organization)\r\n    if (_organizationData.data.organization.organization_logo) {\r\n      setPreviewImageLogo(\r\n        '..\\\\..\\\\..\\\\uploads\\\\c-' +\r\n        user.organization_id +\r\n        '\\\\organization\\\\' +\r\n        _organizationData.data.organization.organization_logo,\r\n      )\r\n      setPreviewVisibleLogo(true)\r\n      \r\n    }\r\n    setFields([\r\n      {\r\n        name: ['organization_name'],\r\n        value: _organizationData.data.organization.organization_name ? _organizationData.data.organization.organization_name : \"\"\r\n      },\r\n      {\r\n        name: ['organization_name_eng'],\r\n        value: _organizationData.data.organization.organization_name_eng ? _organizationData.data.organization.organization_name_eng : \"\"\r\n      }\r\n\r\n\r\n    ])\r\n  };\r\n\r\n\r\n  const imageUploadpropsLogo = {\r\n    name: 'file',\r\n    multiple: false,\r\n    listType: 'text',\r\n    maxCount: 1,\r\n    action: \"/api/upload/organization\",\r\n    preview: false,\r\n    customRequest: (options) => {\r\n      const data = new FormData()\r\n      data.append('file', options.file)\r\n      data.append('id', user.type_user == 1 ? \"admin\" : user.organization_id)\r\n      const config = {\r\n        \"headers\": {\r\n          \"content-type\": 'multipart/form-data; boundary=----WebKitFormBoundaryqTqJIxvkWFYqvP5s'\r\n        }\r\n      }\r\n      axios.post(options.action, data, config).then((res) => {\r\n        setImageLandingPageLogo(res.data.data.list[0]._name)\r\n        options.onSuccess(res.data, options.file)\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      })\r\n\r\n    },\r\n    async onChange(info) {\r\n      const { status } = info.file\r\n      switch (info.file.status) {\r\n        case \"done\":\r\n          if (!info.file.url && !info.file.preview) {\r\n            info.file.preview = await getBase64(info.file.originFileObj);\r\n          }\r\n          setPreviewImageLogo(info.file.url || info.file.preview)\r\n          setPreviewVisibleLogo(true)\r\n          break;\r\n\r\n        default:\r\n        // error or removed\r\n        // resetImagePreview()\r\n      }\r\n\r\n    },\r\n    onRemove(info) {\r\n      console.log(\"onRemove\")\r\n      console.log(info)\r\n      resetImagePreview()\r\n\r\n    }\r\n  }\r\n\r\n  const resetImagePreview = () => {\r\n    setPreviewVisibleLogo(false);\r\n    setPreviewImageLogo(null);\r\n  };\r\n\r\n  function getBase64(file) {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = error => reject(error);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Government - Admin management\"\r\n      url={origin}\r\n      origin={origin}\r\n      // user={login}\r\n      indexSubMenu={\"6\"}\r\n      indexMenu={\"sub-6-0\"}\r\n      titlePage=\"ข้อมูลองค์กร\"\r\n      _routes={[\r\n        {\r\n          path: '/admin/dashborad',\r\n          breadcrumbName: 'หน้าหลัก',\r\n        },\r\n        {\r\n          path: '/admin/setting/profile',\r\n          breadcrumbName: 'ข้อมูลองค์กร',\r\n        },\r\n      ]}\r\n    >\r\n      {contextHolder}\r\n      <link\r\n        rel=\"stylesheet\"\r\n        href=\"https://unpkg.com/react-quill@1.3.3/dist/quill.snow.css\"\r\n      ></link>\r\n      <div className=\"w-5/6 lg:w-full mx-auto\">\r\n        <Form\r\n          name=\"basic\"\r\n          layout=\"vertical\"\r\n          onFinish={onSubmitHandler}\r\n          requiredMark={true}\r\n          form={form}\r\n          fields={fields}\r\n        >\r\n          <div className=\"lg:inline-flex w-full\">\r\n            <div className=\"inline-flex lg:w-1/6  pr-2\">\r\n              <Form.Item\r\n                name=\"organization_logo\"\r\n                className=\"block text-gray-700 text-sm font-bold mb-2 w-auto h-auto text-center w-full\"\r\n              // rules={[\r\n              //   {\r\n              //     required: true,\r\n              //     message: 'กรุณากรอกเลือกภาพ Logo องค์กร',\r\n              //   },\r\n              // ]}\r\n              >\r\n                {/* <Dragger {...dropimg}> */}\r\n                <Dragger\r\n                  maxCount={1}\r\n                  // listType=\"picture\"\r\n                  accept=\".jpg, .jpeg, .png\"\r\n                  {...imageUploadpropsLogo}\r\n                  className=\"\"\r\n                >\r\n\r\n                  {previewVisibleLogo && <><Image\r\n                    // width={200}\r\n                    preview={false}\r\n                    src={previewImageLogo}\r\n                    style={{\r\n                      height: '116px',\r\n                      width: 'auto',\r\n                      objectFit: 'cover'\r\n                    }}\r\n                  />\r\n                    <p className=\"text-sm\">\r\n                      คลิก หรือ ลากไฟล์มาที่บริเวณนี้เพื่ออัปโหลด Logo องค์กร\r\n                    </p>\r\n                  </>\r\n                  }\r\n                  {!previewVisibleLogo && <>\r\n                    <p className=\"ant-upload-drag-icon\">\r\n                      <InboxOutlined />\r\n                    </p>\r\n                    <p className=\"ant-upload-text\">\r\n                      คลิก หรือ ลากไฟล์มาที่บริเวณนี้เพื่ออัปโหลด Logo องค์กร\r\n                    </p>\r\n                  </>\r\n                  }\r\n                </Dragger>\r\n              </Form.Item>\r\n            </div>\r\n            <div className=\"lg:w-5/6 \">\r\n              <Form.Item\r\n                name=\"organization_name\"\r\n                label=\"ชื่อหน่วยงาน\"\r\n                className=\"block text-gray-700 text-sm font-bold mb-2 w-full\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    message: 'กรุณากรอกชื่อหน่วยงาน',\r\n                  },\r\n                ]}\r\n              >\r\n                <TextArea\r\n                  id=\"#\"\r\n                  type=\"text\"\r\n                  placeholder=\"ชื่อหน่วยงาน\"\r\n                  className=\"resize-none border rounded-md\"\r\n                  autoSize={{ minRows: 1, maxRows: 3 }}\r\n                />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"organization_name_eng\"\r\n                label=\"ชื่อหน่วยงาน ภาษาอังกฤษ\"\r\n                className=\"block text-gray-700 text-sm font-bold mb-2 w-full\"\r\n              // rules={[\r\n              //   {\r\n              //     required: true,\r\n              //     message: 'กรุณากรอกชื่อหน่วยงานภาษาอังกฤษ',\r\n              //   },\r\n              // ]}\r\n              >\r\n                <TextArea\r\n                  id=\"#\"\r\n                  type=\"text\"\r\n                  placeholder=\"ชื่อหน่วยงาน ภาษาอังกฤษ\"\r\n                  className=\"resize-none border rounded-md\"\r\n                  autoSize={{ minRows: 1, maxRows: 3 }}\r\n                />\r\n              </Form.Item>\r\n            </div>\r\n          </div>\r\n          <Form.Item className=\"flex mt-6\">\r\n            <div className=\"lg:inline-flex w-full\">\r\n              <div className=\"text-center lg:text-right w-full\">\r\n                <Button\r\n                  htmlType=\"button\"\r\n                  onClick={onReset}\r\n                  style={{\r\n                    backgroundColor: '#C2CFE0',\r\n                    borderColor: '#C2CFE0',\r\n                    height: 40,\r\n                    width: 110,\r\n                    marginBottom: '0px !important',\r\n                    marginRight: '2px',\r\n                    color: 'white !important',\r\n                  }}\r\n                  // htmlType=\"submit\"\r\n                  className=\"text-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full lg:w-1/4\"\r\n                >\r\n                  <Text className=\"text-custom-black \">รีเซ็ท</Text>\r\n                </Button>\r\n                <Button\r\n                  // type=\"primary\"\r\n                  style={{\r\n                    backgroundColor: '#059669',\r\n                    borderColor: '#059669',\r\n                    height: 40,\r\n                    width: 110,\r\n                    marginBottom: '0px !important',\r\n                    color: 'white !important',\r\n                  }}\r\n                  htmlType=\"submit\"\r\n                  className=\"text-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full lg:w-1/4\"\r\n                >\r\n                  <Text className=\"text-custom-white \">บันทึก</Text>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n/* getServerSideProps */\r\nexport async function getServerSideProps(context) {\r\n  const { req } = context;\r\n  const { origin } = absoluteUrl(req);\r\n\r\n  return {\r\n    props: {\r\n      origin,\r\n    },\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}