{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\govermentlt\\\\pages\\\\admin\\\\management-menu\\\\primary-menu\\\\index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { DragOutlined } from '@ant-design/icons'; // import UserNav from '../components/navigation/User';\n\nimport { Button, Empty, Input, List, Modal, notification, Spin, Tag, Typography } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport ReactDragListView from 'react-drag-listview';\n/* components */\n\nimport Layout from '../../../../components/layout/LayoutAdmin';\nimport ModalAddMenu from '../../../../components/managemnet/primary-menu/add-menu';\nimport ModalAddMenuSub from '../../../../components/managemnet/primary-menu/add-menu-sub';\nimport ModalEditMenu from '../../../../components/managemnet/primary-menu/edit-menu';\nimport ModalEditMenuSub from '../../../../components/managemnet/primary-menu/edit-menu-sub';\n/* utils */\n\nimport { apiInstance } from '../../../../middleware/utils';\nvar Text = Typography.Text,\n    Title = Typography.Title;\nvar TextArea = Input.TextArea;\n/*\r\n  This example uses react-drag-listview, and AntDesign which can be found\r\n  at their respective links below:\r\n  https://github.com/raisezhang/react-drag-listview#readme\r\n  https://ant.design/docs/react/introduce\r\n*/\n\n/* MOCK DATA: parent list as Value, subList as subList */\n\nvar mockData = [{\n  id: 'category-one',\n  value: 'Category One',\n  subList: ['Eget odio bibendum commodo malesuada Mattis montes.', 'Nullam at rhoncus. Erat pretium pharetra auctor.', 'Justo sed interdum sociosqu a molestie nascetur nostra metus.']\n}, {\n  id: 'category-two',\n  value: 'Category Two',\n  subList: ['Senectus libero blandit consectetuer penatibus gravida quisque lacinia id nunc.', 'Elit. Ac. Nulla justo nibh. Fringilla, class Tempor consequat proin.']\n}];\nexport var __N_SSP = true;\nexport default function Home(props) {\n  _s();\n\n  var _this = this;\n\n  var _notification$useNoti = notification.useNotification(),\n      _notification$useNoti2 = _slicedToArray(_notification$useNoti, 2),\n      api = _notification$useNoti2[0],\n      contextHolder = _notification$useNoti2[1];\n\n  var _useState = useState([]),\n      menus = _useState[0],\n      setMenus = _useState[1];\n\n  var user = props.user,\n      origin = props.origin;\n\n  var _useState2 = useState(null),\n      login = _useState2[0],\n      setLogin = _useState2[1];\n\n  var _useState3 = useState(mockData),\n      data = _useState3[0],\n      setData = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(null),\n      dataDelete = _useState5[0],\n      setDataDelete = _useState5[1];\n\n  var _useState6 = useState(null),\n      dataEdit = _useState6[0],\n      setDataEdit = _useState6[1];\n\n  var _useState7 = useState(false),\n      visibleModalDelete = _useState7[0],\n      setVisibleModalDelete = _useState7[1];\n\n  var _useState8 = useState(false),\n      visibleEditModal = _useState8[0],\n      setVisibleEditModal = _useState8[1];\n\n  var _useState9 = useState(false),\n      visibleEditMenuSubModal = _useState9[0],\n      setVisibleEditMenuSubModal = _useState9[1];\n\n  var _useState10 = useState(false),\n      visibleAddSubMenuModal = _useState10[0],\n      setVisibleAddSubMenuModal = _useState10[1];\n\n  var _useState11 = useState(false),\n      visibleModalMenuSubDelete = _useState11[0],\n      setVisibleModalMenuSubDelete = _useState11[1];\n\n  useEffect(function () {\n    fetch();\n  }, []);\n\n  var fetch = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var params,\n          menuData,\n          _args = arguments;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              params = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n              setLoading(true); // setVisibleEditModal(false)\n\n              _context.next = 4;\n              return apiInstance().get('menu?organization_id=' + (!user ? 0 : user.organization_id));\n\n            case 4:\n              menuData = _context.sent;\n              console.log(menuData);\n              setMenus(menuData.data.results);\n              setTimeout(function () {\n                //Start the timer\n                setLoading(false);\n              }.bind(_this), 800);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetch() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  /*\r\n    REORDER ACCEPTS:\r\n      list: arr, accepts array of data to be reordered,\r\n      fromIndex: int, onDragStart index,\r\n      toIndex: int, onDragEnd index,\r\n  */\n\n\n  var reorder = function reorder(list, startIndex, endIndex) {\n    var result = Array.from(list);\n\n    var _result$splice = result.splice(startIndex, 1),\n        _result$splice2 = _slicedToArray(_result$splice, 1),\n        removed = _result$splice2[0];\n\n    result.splice(endIndex, 0, removed);\n    return result;\n  };\n  /*\r\n    ON DRAG END EVENT HANDLER ACCEPTS:\r\n      fromIndex: int, onDragStart index,\r\n      toIndex: int, onDragEnd index,\r\n      type: str, ReactDragListView Identifier,\r\n      index: MUST be parent list index,\r\n  */\n\n\n  var _onDragEnd = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fromIndex, toIndex, type, index) {\n      var _data, menuData, _dataRevert, menuDataRevert, _data2, _menuData, _dataRevert2, _menuDataRevert;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoading(true);\n              /* IGNORES DRAG IF OUTSIDE DESIGNATED AREA */\n\n              if (!(toIndex < 0)) {\n                _context2.next = 3;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              if (!(type === 'LIST-ITEM')) {\n                _context2.next = 15;\n                break;\n              }\n\n              _data = {\n                menu_id: menus[fromIndex].menu_id,\n                menu_seq: toIndex\n              };\n              _context2.next = 7;\n              return apiInstance().put('menu/reorder-menu', _data);\n\n            case 7:\n              menuData = _context2.sent;\n              _dataRevert = {\n                menu_id: menus[toIndex].menu_id,\n                menu_seq: fromIndex\n              };\n              _context2.next = 11;\n              return apiInstance().put('menu/reorder-menu', _dataRevert);\n\n            case 11:\n              menuDataRevert = _context2.sent;\n              return _context2.abrupt(\"return\", fetch());\n\n            case 15:\n              if (!(type === 'SUBLIST-ITEM')) {\n                _context2.next = 34;\n                break;\n              }\n\n              console.log(' onDragEnd LIST-ITEM');\n              console.log(fromIndex);\n              console.log(toIndex);\n              console.log(type);\n              console.log(index);\n              console.log(menus[index].menu_subs[fromIndex]);\n              console.log(menus[index].menu_subs[toIndex]);\n              _data2 = {\n                menu_sub_id: menus[index].menu_subs[fromIndex].menu_sub_id,\n                menu_seq: toIndex\n              };\n              _context2.next = 26;\n              return apiInstance().put('menu/reorder-menu-sub', _data2);\n\n            case 26:\n              _menuData = _context2.sent;\n              _dataRevert2 = {\n                menu_sub_id: menus[index].menu_subs[toIndex].menu_sub_id,\n                menu_seq: fromIndex\n              };\n              _context2.next = 30;\n              return apiInstance().put('menu/reorder-menu-sub', _dataRevert2);\n\n            case 30:\n              _menuDataRevert = _context2.sent;\n              return _context2.abrupt(\"return\", fetch());\n\n            case 34:\n              return _context2.abrupt(\"return\", new Error('NOT A VALID LIST'));\n\n            case 35:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onDragEnd(_x, _x2, _x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  /*\\\r\n    nodeSelector={}, DRAGGABLE ELEMENT IDENTIFIER, i.e 'li', ant-list.draggable>\r\n    ALL STYLES APPLIED TO lineClassName MUST BE OVERRIDDEN WITH !important\r\n  */\n\n\n  var onDelete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(value) {\n      var registerData;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return apiInstance()[\"delete\"]('menu/' + dataDelete.menu_id, {});\n\n            case 2:\n              registerData = _context3.sent;\n\n              if (registerData.data.status == 200) {\n                openNotificationSuccess(); // fetchOrganizationData();\n\n                setVisibleModalDelete(false);\n                fetch();\n              } else {\n                openNotificationFail(registerData.data.message);\n              }\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onDelete(_x5) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onMenuSubDelete = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(value) {\n      var registerData;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return apiInstance()[\"delete\"]('menu-sub/' + dataDelete.menu_sub_id, {});\n\n            case 2:\n              registerData = _context4.sent;\n\n              if (registerData.data.status == 200) {\n                openNotificationSuccess(); // fetchOrganizationData();\n\n                setVisibleModalMenuSubDelete(false);\n                fetch();\n              } else {\n                openNotificationFail(registerData.data.message);\n              }\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function onMenuSubDelete(_x6) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var openNotificationSuccess = function openNotificationSuccess() {\n    api.success({\n      message: \"\\u0E25\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\",\n      description: 'ลบข้อมูลสำเร็จ',\n      placement: 'topRight'\n    });\n  };\n\n  var openNotificationFail = function openNotificationFail(messgae) {\n    api.error({\n      message: \"\\u0E1E\\u0E1A\\u0E1B\\u0E31\\u0E0D\\u0E2B\\u0E32\\u0E23\\u0E30\\u0E2B\\u0E27\\u0E48\\u0E32\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\",\n      description: messgae,\n      placement: 'topRight'\n    });\n  };\n\n  var hideModal = function hideModal() {\n    setVisibleModalDelete(false);\n  };\n\n  var hideMenuSubModal = function hideMenuSubModal() {\n    setVisibleModalMenuSubDelete(false);\n  };\n\n  var showModal = function showModal(data) {\n    console.log('data deletd');\n    console.log(data);\n    setDataDelete(data);\n    setVisibleModalDelete(true);\n  };\n\n  var showDeletMenuSubModal = function showDeletMenuSubModal(data) {\n    console.log('data deletd');\n    console.log(data);\n    setDataDelete(data);\n    setVisibleModalMenuSubDelete(true);\n  };\n\n  var onclikEditModal = function onclikEditModal(value, obj) {\n    // compareSync\n    console.log('onclikEditModal');\n    setDataEdit(obj);\n    setVisibleEditModal(value);\n  };\n\n  var onclikEditMenuSubModal = function onclikEditMenuSubModal(value, obj) {\n    // compareSync\n    setDataEdit(obj);\n    setVisibleEditMenuSubModal(value);\n  };\n\n  var onclikAddSubMenuModal = function onclikAddSubMenuModal(value, obj) {\n    // compareSync\n    console.log('onclikEditModal');\n    setDataEdit(obj);\n    setVisibleAddSubMenuModal(value);\n  };\n\n  var hideEditModal = function hideEditModal() {\n    // setVisibleModalDelete(false)\n    setVisibleEditModal(false);\n  };\n\n  var hideSubMenuModal = function hideSubMenuModal() {\n    // setVisibleModalDelete(false)\n    setVisibleAddSubMenuModal(false);\n  };\n\n  var hideEditMenuSubModal = function hideEditMenuSubModal() {\n    // setVisibleModalDelete(false)\n    setVisibleEditMenuSubModal(false);\n  };\n\n  return __jsx(Layout, {\n    title: \"Government - Admin management\",\n    url: origin,\n    origin: origin,\n    user: login,\n    isMain: true,\n    indexSubMenu: '2',\n    indexMenu: 'sub-2-0',\n    titlePage: 'เมนูหลัก',\n    _routes: [{\n      path: '/admin/dashborad',\n      breadcrumbName: 'หน้าหลัก'\n    }, {\n      path: '',\n      breadcrumbName: 'เมนูหลัก'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }\n  }, contextHolder, __jsx(ModalAddMenu, {\n    fetch: fetch,\n    user: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 9\n    }\n  }), __jsx(ModalEditMenu, {\n    _visible: visibleEditModal,\n    hideEditModal: hideEditModal,\n    fetch: fetch,\n    user: user,\n    dataEdit: dataEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }\n  }), __jsx(ModalEditMenuSub, {\n    _visible: visibleEditMenuSubModal,\n    hideModal: hideEditMenuSubModal,\n    fetch: fetch,\n    user: user,\n    dataEdit: dataEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 9\n    }\n  }), __jsx(ModalAddMenuSub, {\n    _visible: visibleAddSubMenuModal,\n    hideModal: hideSubMenuModal,\n    fetch: fetch,\n    user: user,\n    dataEdit: dataEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }\n  }), __jsx(Spin, {\n    spinning: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 9\n    }\n  }, __jsx(ReactDragListView, {\n    nodeSelector: \".ant-list.draggable\",\n    lineClassName: \"dragLine\",\n    onDragEnd: function onDragEnd(fromIndex, toIndex) {\n      return _onDragEnd(fromIndex, toIndex, 'LIST-ITEM');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 11\n    }\n  }, menus.length == 0 && __jsx(Empty, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 35\n    }\n  }), menus.map(function (obj, index) {\n    return __jsx(List, {\n      header: __jsx(React.Fragment, null, __jsx(Typography.Text, {\n        strong: true,\n        className: \"grabbable\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 21\n        }\n      }, __jsx(DragOutlined, {\n        className: \"icon\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 23\n        }\n      }), obj.menu_title), __jsx(Tag, {\n        color: obj.is_show == 1 ? 'success' : 'default',\n        style: {\n          marginLeft: '10px',\n          marginRight: '0px'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 21\n        }\n      }, obj.is_show == 1 ? 'ใช้งาน' : 'ไม่ใช้งาน'), __jsx(Button, {\n        className: \"ml-2\",\n        type: \"default\",\n        onClick: function onClick() {\n          onclikEditModal(true, obj);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 21\n        }\n      }, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"), obj.have_sub == 1 && __jsx(Button, {\n        style: {\n          backgroundColor: '#059669',\n          color: 'white',\n          borderColor: '#059669'\n        },\n        onClick: function onClick() {\n          onclikAddSubMenuModal(true, obj);\n        },\n        className: \"ml-2\",\n        type: \"success\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 23\n        }\n      }, \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E21\\u0E19\\u0E39\\u0E22\\u0E48\\u0E2D\\u0E22\"), __jsx(Button, {\n        className: \"ml-2\",\n        type: \"danger\",\n        onClick: function onClick() {\n          return showModal(obj);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 21\n        }\n      }, \"\\u0E25\\u0E1A\")),\n      key: index,\n      className: \"draggable\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 15\n      }\n    }, __jsx(ReactDragListView, {\n      nodeSelector: \".ant-list-item.draggable-item\",\n      lineClassName: \"dragLine\",\n      onDragEnd: function onDragEnd(fromIndex, toIndex) {\n        return _onDragEnd(fromIndex, toIndex, 'SUBLIST-ITEM', index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 17\n      }\n    }, obj.have_sub == 1 && __jsx(React.Fragment, null, obj.menu_subs.map(function (item, index2) {\n      return __jsx(List.Item, {\n        key: index2,\n        className: \"draggable-item\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 25\n        }\n      }, __jsx(DragOutlined, {\n        className: \"icon\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 27\n        }\n      }), __jsx(List.Item.Meta, {\n        title: item.menu_title,\n        className: \"grabbable\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 27\n        }\n      }), __jsx(Tag, {\n        color: item.is_show == 1 ? 'success' : 'default',\n        style: {\n          marginLeft: '10px',\n          marginRight: '10px'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 27\n        }\n      }, item.is_show == 1 ? 'ใช้งาน' : 'ไม่ใช้งาน'), __jsx(Button, {\n        className: \"mr-1\",\n        type: \"default\",\n        onClick: function onClick() {\n          onclikEditMenuSubModal(true, item);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 27\n        }\n      }, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"), __jsx(Button, {\n        className: \"mr-2\",\n        type: \"danger\",\n        onClick: function onClick() {\n          return showDeletMenuSubModal(item);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 27\n        }\n      }, \"\\u0E25\\u0E1A\"));\n    }))));\n  })))), __jsx(Modal, {\n    title: \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?\",\n    visible: visibleModalDelete,\n    onOk: onDelete,\n    onCancel: hideModal,\n    okText: \"\\u0E25\\u0E1A\",\n    cancelText: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",\n    okButtonProps: {\n      type: 'primary',\n      danger: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 9\n    }\n  }, \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A \\\"\", dataDelete ? dataDelete.menu_title : '', \"\\\" \\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?\", ' ')), __jsx(Modal, {\n    title: \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?\",\n    visible: visibleModalMenuSubDelete,\n    onOk: onMenuSubDelete,\n    onCancel: hideMenuSubModal,\n    okText: \"\\u0E25\\u0E1A\",\n    cancelText: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",\n    okButtonProps: {\n      type: 'primary',\n      danger: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 9\n    }\n  }, \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A \\\"\", dataDelete ? dataDelete.menu_title : '', \"\\\" \\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?\", ' ')));\n}\n/* getServerSideProps */\n\n_s(Home, \"PowmPuSdz0cUTRClRU2Sp9+HKNI=\", false, function () {\n  return [notification.useNotification];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["D:/govermentlt/pages/admin/management-menu/primary-menu/index.js"],"names":["DragOutlined","Button","Empty","Input","List","Modal","notification","Spin","Tag","Typography","React","useEffect","useState","ReactDragListView","Layout","ModalAddMenu","ModalAddMenuSub","ModalEditMenu","ModalEditMenuSub","apiInstance","Text","Title","TextArea","mockData","id","value","subList","Home","props","useNotification","api","contextHolder","menus","setMenus","user","origin","login","setLogin","data","setData","loading","setLoading","dataDelete","setDataDelete","dataEdit","setDataEdit","visibleModalDelete","setVisibleModalDelete","visibleEditModal","setVisibleEditModal","visibleEditMenuSubModal","setVisibleEditMenuSubModal","visibleAddSubMenuModal","setVisibleAddSubMenuModal","visibleModalMenuSubDelete","setVisibleModalMenuSubDelete","fetch","params","get","organization_id","menuData","console","log","results","setTimeout","bind","reorder","list","startIndex","endIndex","result","Array","from","splice","removed","onDragEnd","fromIndex","toIndex","type","index","_data","menu_id","menu_seq","put","_dataRevert","menuDataRevert","menu_subs","menu_sub_id","Error","onDelete","registerData","status","openNotificationSuccess","openNotificationFail","message","onMenuSubDelete","success","description","placement","messgae","error","hideModal","hideMenuSubModal","showModal","showDeletMenuSubModal","onclikEditModal","obj","onclikEditMenuSubModal","onclikAddSubMenuModal","hideEditModal","hideSubMenuModal","hideEditMenuSubModal","path","breadcrumbName","length","map","menu_title","is_show","marginLeft","marginRight","have_sub","backgroundColor","color","borderColor","item","index2","danger"],"mappings":"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","sourcesContent":["import { DragOutlined } from '@ant-design/icons';\r\n// import UserNav from '../components/navigation/User';\r\nimport {\r\n  Button,\r\n  Empty,\r\n  Input,\r\n  List,\r\n  Modal,\r\n  notification,\r\n  Spin,\r\n  Tag,\r\n  Typography\r\n} from 'antd';\r\nimport React, { useEffect, useState } from 'react';\r\nimport ReactDragListView from 'react-drag-listview';\r\n/* components */\r\nimport Layout from '../../../../components/layout/LayoutAdmin';\r\nimport ModalAddMenu from '../../../../components/managemnet/primary-menu/add-menu';\r\nimport ModalAddMenuSub from '../../../../components/managemnet/primary-menu/add-menu-sub';\r\nimport ModalEditMenu from '../../../../components/managemnet/primary-menu/edit-menu';\r\nimport ModalEditMenuSub from '../../../../components/managemnet/primary-menu/edit-menu-sub';\r\n/* utils */\r\nimport { absoluteUrl, apiInstance } from '../../../../middleware/utils';\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nconst { TextArea } = Input;\r\n\r\n/*\r\n  This example uses react-drag-listview, and AntDesign which can be found\r\n  at their respective links below:\r\n  https://github.com/raisezhang/react-drag-listview#readme\r\n  https://ant.design/docs/react/introduce\r\n*/\r\n\r\n/* MOCK DATA: parent list as Value, subList as subList */\r\nconst mockData = [\r\n  {\r\n    id: 'category-one',\r\n    value: 'Category One',\r\n    subList: [\r\n      'Eget odio bibendum commodo malesuada Mattis montes.',\r\n      'Nullam at rhoncus. Erat pretium pharetra auctor.',\r\n      'Justo sed interdum sociosqu a molestie nascetur nostra metus.',\r\n    ],\r\n  },\r\n  {\r\n    id: 'category-two',\r\n    value: 'Category Two',\r\n    subList: [\r\n      'Senectus libero blandit consectetuer penatibus gravida quisque lacinia id nunc.',\r\n      'Elit. Ac. Nulla justo nibh. Fringilla, class Tempor consequat proin.',\r\n    ],\r\n  },\r\n];\r\n\r\nexport default function Home(props) {\r\n  const [api, contextHolder] = notification.useNotification();\r\n  const [menus, setMenus] = useState([]);\r\n  const { user, origin } = props;\r\n  const [login, setLogin] = useState(null);\r\n  const [data, setData] = useState(mockData);\r\n  const [loading, setLoading] = useState(false);\r\n  const [dataDelete, setDataDelete] = useState(null);\r\n  const [dataEdit, setDataEdit] = useState(null);\r\n  const [visibleModalDelete, setVisibleModalDelete] = useState(false);\r\n  const [visibleEditModal, setVisibleEditModal] = useState(false);\r\n  const [visibleEditMenuSubModal, setVisibleEditMenuSubModal] = useState(false);\r\n  const [visibleAddSubMenuModal, setVisibleAddSubMenuModal] = useState(false);\r\n  const [visibleModalMenuSubDelete, setVisibleModalMenuSubDelete] = useState(\r\n    false,\r\n  );\r\n\r\n  useEffect(() => {\r\n    fetch();\r\n  }, []);\r\n\r\n  const fetch = async (params = {}) => {\r\n    setLoading(true);\r\n    // setVisibleEditModal(false)\r\n    const menuData = await apiInstance().get(\r\n      'menu?organization_id=' + (!user ? 0 : user.organization_id),\r\n    );\r\n    console.log(menuData);\r\n    setMenus(menuData.data.results);\r\n    setTimeout(\r\n      function () {\r\n        //Start the timer\r\n        setLoading(false);\r\n      }.bind(this),\r\n      800,\r\n    );\r\n  };\r\n  /*\r\n    REORDER ACCEPTS:\r\n      list: arr, accepts array of data to be reordered,\r\n      fromIndex: int, onDragStart index,\r\n      toIndex: int, onDragEnd index,\r\n  */\r\n\r\n  const reorder = (list, startIndex, endIndex) => {\r\n    const result = Array.from(list);\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n    return result;\r\n  };\r\n\r\n  /*\r\n    ON DRAG END EVENT HANDLER ACCEPTS:\r\n      fromIndex: int, onDragStart index,\r\n      toIndex: int, onDragEnd index,\r\n      type: str, ReactDragListView Identifier,\r\n      index: MUST be parent list index,\r\n  */\r\n\r\n  const onDragEnd = async (fromIndex, toIndex, type, index) => {\r\n    setLoading(true);\r\n    /* IGNORES DRAG IF OUTSIDE DESIGNATED AREA */\r\n    if (toIndex < 0) return;\r\n\r\n    /* REORDER PARENT OR SUBLIST, ELSE THROW ERROR */\r\n    if (type === 'LIST-ITEM') {\r\n      const _data = {\r\n        menu_id: menus[fromIndex].menu_id,\r\n        menu_seq: toIndex,\r\n      };\r\n      const menuData = await apiInstance().put('menu/reorder-menu', _data);\r\n\r\n      const _dataRevert = {\r\n        menu_id: menus[toIndex].menu_id,\r\n        menu_seq: fromIndex,\r\n      };\r\n      const menuDataRevert = await apiInstance().put(\r\n        'menu/reorder-menu',\r\n        _dataRevert,\r\n      );\r\n      // console.log(menuDataRevert)\r\n      return fetch();\r\n      // const categories = reorder(data, fromIndex, toIndex);\r\n      // return setData(categories);\r\n    } else if (type === 'SUBLIST-ITEM') {\r\n      console.log(' onDragEnd LIST-ITEM');\r\n      console.log(fromIndex);\r\n      console.log(toIndex);\r\n      console.log(type);\r\n      console.log(index);\r\n      console.log(menus[index].menu_subs[fromIndex]);\r\n      console.log(menus[index].menu_subs[toIndex]);\r\n      const _data = {\r\n        menu_sub_id: menus[index].menu_subs[fromIndex].menu_sub_id,\r\n        menu_seq: toIndex,\r\n      };\r\n      const menuData = await apiInstance().put('menu/reorder-menu-sub', _data);\r\n\r\n      const _dataRevert = {\r\n        menu_sub_id: menus[index].menu_subs[toIndex].menu_sub_id,\r\n        menu_seq: fromIndex,\r\n      };\r\n      const menuDataRevert = await apiInstance().put(\r\n        'menu/reorder-menu-sub',\r\n        _dataRevert,\r\n      );\r\n\r\n      // const subList = reorder(data[index].subList, fromIndex, toIndex);\r\n      // const categories = JSON.parse(JSON.stringify(data));\r\n      // categories[index].subList = subList;\r\n      // return setData(categories);\r\n      return fetch();\r\n    } else return new Error('NOT A VALID LIST');\r\n  };\r\n  /*\\\r\n    nodeSelector={}, DRAGGABLE ELEMENT IDENTIFIER, i.e 'li', ant-list.draggable>\r\n    ALL STYLES APPLIED TO lineClassName MUST BE OVERRIDDEN WITH !important\r\n  */\r\n\r\n  const onDelete = async value => {\r\n    // console.log('DELETE')\r\n\r\n    const registerData = await apiInstance().delete(\r\n      'menu/' + dataDelete.menu_id,\r\n      {},\r\n    );\r\n    if (registerData.data.status == 200) {\r\n      openNotificationSuccess();\r\n      // fetchOrganizationData();\r\n      setVisibleModalDelete(false);\r\n      fetch();\r\n    } else {\r\n      openNotificationFail(registerData.data.message);\r\n    }\r\n  };\r\n  const onMenuSubDelete = async value => {\r\n    // console.log('DELETE')\r\n\r\n    const registerData = await apiInstance().delete(\r\n      'menu-sub/' + dataDelete.menu_sub_id,\r\n      {},\r\n    );\r\n    if (registerData.data.status == 200) {\r\n      openNotificationSuccess();\r\n      // fetchOrganizationData();\r\n      setVisibleModalMenuSubDelete(false);\r\n      fetch();\r\n    } else {\r\n      openNotificationFail(registerData.data.message);\r\n    }\r\n  };\r\n\r\n  const openNotificationSuccess = () => {\r\n    api.success({\r\n      message: `ลบข้อมูลสำเร็จ`,\r\n      description: 'ลบข้อมูลสำเร็จ',\r\n      placement: 'topRight',\r\n    });\r\n  };\r\n\r\n  const openNotificationFail = messgae => {\r\n    api.error({\r\n      message: `พบปัญหาระหว่างการลบข้อมูล`,\r\n      description: messgae,\r\n      placement: 'topRight',\r\n    });\r\n  };\r\n\r\n  const hideModal = () => {\r\n    setVisibleModalDelete(false);\r\n  };\r\n\r\n  const hideMenuSubModal = () => {\r\n    setVisibleModalMenuSubDelete(false);\r\n  };\r\n\r\n  const showModal = data => {\r\n    console.log('data deletd');\r\n    console.log(data);\r\n    setDataDelete(data);\r\n    setVisibleModalDelete(true);\r\n  };\r\n  const showDeletMenuSubModal = data => {\r\n    console.log('data deletd');\r\n    console.log(data);\r\n    setDataDelete(data);\r\n    setVisibleModalMenuSubDelete(true);\r\n  };\r\n\r\n  const onclikEditModal = (value, obj) => {\r\n    // compareSync\r\n    console.log('onclikEditModal');\r\n    setDataEdit(obj);\r\n    setVisibleEditModal(value);\r\n  };\r\n\r\n  const onclikEditMenuSubModal = (value, obj) => {\r\n    // compareSync\r\n    setDataEdit(obj);\r\n    setVisibleEditMenuSubModal(value);\r\n  };\r\n\r\n  const onclikAddSubMenuModal = (value, obj) => {\r\n    // compareSync\r\n    console.log('onclikEditModal');\r\n    setDataEdit(obj);\r\n    setVisibleAddSubMenuModal(value);\r\n  };\r\n\r\n  const hideEditModal = () => {\r\n    // setVisibleModalDelete(false)\r\n    setVisibleEditModal(false);\r\n  };\r\n  const hideSubMenuModal = () => {\r\n    // setVisibleModalDelete(false)\r\n    setVisibleAddSubMenuModal(false);\r\n  };\r\n  const hideEditMenuSubModal = () => {\r\n    // setVisibleModalDelete(false)\r\n    setVisibleEditMenuSubModal(false);\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Government - Admin management\"\r\n      url={origin}\r\n      origin={origin}\r\n      user={login}\r\n      isMain={true}\r\n      indexSubMenu={'2'}\r\n      indexMenu={'sub-2-0'}\r\n      titlePage={'เมนูหลัก'}\r\n      _routes={[\r\n        {\r\n          path: '/admin/dashborad',\r\n          breadcrumbName: 'หน้าหลัก',\r\n        },\r\n        {\r\n          path: '',\r\n          breadcrumbName: 'เมนูหลัก',\r\n        },\r\n      ]}\r\n    >\r\n      <div>\r\n        {contextHolder}\r\n        <ModalAddMenu fetch={fetch} user={user} />\r\n        <ModalEditMenu\r\n          _visible={visibleEditModal}\r\n          hideEditModal={hideEditModal}\r\n          fetch={fetch}\r\n          user={user}\r\n          dataEdit={dataEdit}\r\n        />\r\n        <ModalEditMenuSub\r\n          _visible={visibleEditMenuSubModal}\r\n          hideModal={hideEditMenuSubModal}\r\n          fetch={fetch}\r\n          user={user}\r\n          dataEdit={dataEdit}\r\n        />\r\n        <ModalAddMenuSub\r\n          _visible={visibleAddSubMenuModal}\r\n          hideModal={hideSubMenuModal}\r\n          fetch={fetch}\r\n          user={user}\r\n          dataEdit={dataEdit}\r\n        />\r\n        <Spin spinning={loading}>\r\n          <ReactDragListView\r\n            nodeSelector=\".ant-list.draggable\"\r\n            lineClassName=\"dragLine\"\r\n            onDragEnd={(fromIndex, toIndex) =>\r\n              onDragEnd(fromIndex, toIndex, 'LIST-ITEM')\r\n            }\r\n          >\r\n            {menus.length == 0 && <Empty />}\r\n            {menus.map((obj, index) => (\r\n              <List\r\n                header={\r\n                  <>\r\n                    <Typography.Text strong className=\"grabbable\">\r\n                      <DragOutlined className=\"icon\" />\r\n                      {obj.menu_title}\r\n                    </Typography.Text>\r\n                    <Tag\r\n                      color={obj.is_show == 1 ? 'success' : 'default'}\r\n                      style={{ marginLeft: '10px', marginRight: '0px' }}\r\n                    >\r\n                      {obj.is_show == 1 ? 'ใช้งาน' : 'ไม่ใช้งาน'}\r\n                    </Tag>\r\n                    <Button\r\n                      className=\"ml-2\"\r\n                      type=\"default\"\r\n                      onClick={() => {\r\n                        onclikEditModal(true, obj);\r\n                      }}\r\n                    >\r\n                      แก้ไข\r\n                    </Button>\r\n                    {obj.have_sub == 1 && (\r\n                      <Button\r\n                        style={{\r\n                          backgroundColor: '#059669',\r\n                          color: 'white',\r\n                          borderColor: '#059669',\r\n                        }}\r\n                        onClick={() => {\r\n                          onclikAddSubMenuModal(true, obj);\r\n                        }}\r\n                        className=\"ml-2\"\r\n                        type=\"success\"\r\n                      >\r\n                        เพิ่มเมนูย่อย\r\n                      </Button>\r\n                    )}\r\n                    <Button\r\n                      className=\"ml-2\"\r\n                      type=\"danger\"\r\n                      onClick={() => showModal(obj)}\r\n                    >\r\n                      ลบ\r\n                    </Button>\r\n                  </>\r\n                }\r\n                key={index}\r\n                className=\"draggable\"\r\n              >\r\n                <ReactDragListView\r\n                  nodeSelector=\".ant-list-item.draggable-item\"\r\n                  lineClassName=\"dragLine\"\r\n                  onDragEnd={(fromIndex, toIndex) =>\r\n                    onDragEnd(fromIndex, toIndex, 'SUBLIST-ITEM', index)\r\n                  }\r\n                >\r\n                  {obj.have_sub == 1 && (\r\n                    <>\r\n                      {obj.menu_subs.map((item, index2) => (\r\n                        <List.Item key={index2} className=\"draggable-item\">\r\n                          <DragOutlined className=\"icon\" />\r\n                          <List.Item.Meta\r\n                            title={item.menu_title}\r\n                            className=\"grabbable\"\r\n                          />\r\n                          <Tag\r\n                            color={item.is_show == 1 ? 'success' : 'default'}\r\n                            style={{ marginLeft: '10px', marginRight: '10px' }}\r\n                          >\r\n                            {item.is_show == 1 ? 'ใช้งาน' : 'ไม่ใช้งาน'}\r\n                          </Tag>\r\n                          <Button\r\n                            className=\"mr-1\"\r\n                            type=\"default\"\r\n                            onClick={() => {\r\n                              onclikEditMenuSubModal(true, item);\r\n                            }}\r\n                          >\r\n                            แก้ไข\r\n                          </Button>\r\n                          <Button\r\n                            className=\"mr-2\"\r\n                            type=\"danger\"\r\n                            onClick={() => showDeletMenuSubModal(item)}\r\n                          >\r\n                            ลบ\r\n                          </Button>\r\n                        </List.Item>\r\n                      ))}\r\n                    </>\r\n                  )}\r\n                </ReactDragListView>\r\n              </List>\r\n            ))}\r\n          </ReactDragListView>\r\n        </Spin>\r\n      </div>\r\n\r\n      <Modal\r\n        title=\"คุณต้องการลบข้อมูลหรือไม่?\"\r\n        visible={visibleModalDelete}\r\n        onOk={onDelete}\r\n        onCancel={hideModal}\r\n        okText=\"ลบ\"\r\n        cancelText=\"ยกเลิก\"\r\n        okButtonProps={{\r\n          type: 'primary',\r\n          danger: true,\r\n        }}\r\n      >\r\n        <p>\r\n          คุณต้องการลบ \"{dataDelete ? dataDelete.menu_title : ''}\" หรือไม่?{' '}\r\n        </p>\r\n      </Modal>\r\n\r\n      <Modal\r\n        title=\"คุณต้องการลบข้อมูลหรือไม่?\"\r\n        visible={visibleModalMenuSubDelete}\r\n        onOk={onMenuSubDelete}\r\n        onCancel={hideMenuSubModal}\r\n        okText=\"ลบ\"\r\n        cancelText=\"ยกเลิก\"\r\n        okButtonProps={{\r\n          type: 'primary',\r\n          danger: true,\r\n        }}\r\n      >\r\n        <p>\r\n          คุณต้องการลบ \"{dataDelete ? dataDelete.menu_title : ''}\" หรือไม่?{' '}\r\n        </p>\r\n      </Modal>\r\n    </Layout>\r\n  );\r\n}\r\n/* getServerSideProps */\r\nexport async function getServerSideProps(context) {\r\n  const { req } = context;\r\n  const { origin } = absoluteUrl(req);\r\n\r\n  return {\r\n    props: {\r\n      origin,\r\n    },\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}