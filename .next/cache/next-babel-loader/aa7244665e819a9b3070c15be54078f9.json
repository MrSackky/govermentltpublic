{"ast":null,"code":"var _jsxFileName = \"D:\\\\govermentlt\\\\components\\\\managemnet\\\\poll-menu\\\\add-menu-sub.jsx\";\nvar __jsx = React.createElement;\nimport { Button, Col, Form, Input, Modal, notification, Row, Select, Typography } from 'antd';\nimport dynamic from 'next/dynamic';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { apiInstance } from '../../../middleware/utils';\nconst {\n  Option\n} = Select;\nconst {\n  TextArea\n} = Input; // const config = require('./../../config');\n\nconst config = require('../../../pages/admin/config');\n\nconst JoditEditor = dynamic(() => import(\"jodit-react\"), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"jodit-react\")],\n    modules: [\"jodit-react\"]\n  }\n});\nconst {\n  Text,\n  Title\n} = Typography;\nexport default function modal({\n  _visible,\n  hideModal,\n  fetch,\n  dataEdit\n}) {\n  let divRef = useRef(null);\n  const [api, contextHolder] = notification.useNotification(); // const [divRef] = useRef(null);\n\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const {\n    0: patternMenuSelected,\n    1: setPatternMenuSelected\n  } = useState(1);\n  const {\n    0: patternMenu,\n    1: setPatternMenu\n  } = useState([]);\n  const editor = useRef(null);\n  const {\n    0: content,\n    1: setContent\n  } = useState('');\n  const {\n    0: active,\n    1: setActive\n  } = useState(1);\n  const {\n    0: isSubMenu,\n    1: setIsSubMenu\n  } = useState(0);\n  const {\n    0: isPatternMenu,\n    1: setISPatternMenu\n  } = useState(false);\n  const {\n    0: isShow,\n    1: setIsShow\n  } = useState(true);\n  const [form] = Form.useForm();\n\n  const actived = () => {\n    active ? setActive(0) : setActive(1); // divRef.scrollIntoView({ behavior: \"smooth\" });\n    // divRef.current.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    fetchPattern();\n  }, []);\n\n  const fetchPattern = async () => {\n    const menuData = await apiInstance().get('menu/pattern-menu');\n    console.log(menuData);\n    setPatternMenu(menuData.data.results);\n  };\n\n  const onSubmitHandler = async value => {\n    // organization_id: organization_id,\n    // menu_title: menu_title,\n    // menu_detail: menu_detail,\n    // menu_seq: menu_seq,\n    // have_sub: have_sub,\n    // is_show: is_show,\n    // is_primary_menu: is_primary_menu,\n    // is_pattern_menu: is_pattern_menu,\n    // pattern_menu: pattern_menu,\n    const data = {\n      \"poll_questions_id\": dataEdit.poll_questions_id,\n      \"poll_options_name\": value.poll_options_name,\n      \"poll_options_score\": value.poll_options_score ? value.poll_options_score : 0,\n      \"poll_option_total_score\": 0,\n      \"is_deleted\": 0,\n      \"poll_questions_seq\": 99999\n    };\n    console.log(data);\n    const registerData = await apiInstance().post('/pollmenu/question-option', data);\n\n    if (registerData.data.status == 200) {\n      openNotificationSuccess();\n    } else {\n      openNotificationFail(registerData.data.message);\n    }\n\n    hideModal();\n    onReset();\n    fetch();\n  };\n\n  const openNotificationSuccess = () => {\n    api.success({\n      message: `บันทึกมูลสำเร็จ`,\n      description: 'บันทึกมูลสำเร็จ',\n      placement: 'topRight'\n    });\n  };\n\n  const openNotificationFail = messgae => {\n    api.error({\n      message: `พบปัญหาระหว่างการบันทึกข้อมูล`,\n      description: messgae,\n      placement: 'topRight'\n    });\n  };\n\n  const onReset = () => {\n    setActive(1);\n    setIsSubMenu(0);\n    setISPatternMenu(false);\n    setPatternMenuSelected(1);\n    setIsShow(true);\n    form.resetFields();\n  };\n\n  function handleChange(value) {\n    console.log(`selected ${value}`);\n    setPatternMenuSelected(value);\n\n    if (!isSubMenu) {\n      if (value != 1) {\n        // setIsSubMenu(1)\n        // setISPatternMenu(true)\n        setIsShow(false);\n      } else {\n        // setIsSubMenu(0)\n        // setISPatternMenu(false)\n        setIsShow(true);\n      }\n    } // setMenu(value);\n\n  }\n\n  return __jsx(React.Fragment, null, contextHolder, __jsx(Modal, {\n    title: \"เพิ่มตัวเลือก\",\n    className: \"mt-4 \",\n    centered: true,\n    visible: _visible // onOk={() => onOK()}\n    ,\n    onCancel: () => {\n      hideModal();\n      setActive(1);\n      setIsSubMenu(0);\n      form.resetFields();\n    },\n    width: 1000,\n    footer: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, __jsx(Form, {\n    name: \"basic\",\n    layout: \"vertical\",\n    onFinish: onSubmitHandler,\n    requiredMark: true,\n    form: form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, __jsx(Form.Item, {\n    name: \"poll_options_name\",\n    label: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\",\n    style: {\n      float: 'left'\n    },\n    className: \"block text-gray-700 text-sm font-bold mb-2 w-2/3\",\n    rules: [{\n      required: true,\n      message: 'กรุณากรอกชื่อตัวเลือก'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 29\n    }\n  }, __jsx(Input, {\n    id: \"#\",\n    type: \"text\",\n    placeholder: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\",\n    className: \"resize-none border rounded-md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 33\n    }\n  })), __jsx(Form.Item, {\n    className: \"flex mt-6 mb-0 w-1/3\",\n    style: {\n      marginBottom: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    className: \"lg:inline-flex w-full mt-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    className: \"text-center lg:text-right w-full lg:w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 37\n    }\n  }, __jsx(Button, {\n    htmlType: \"button\",\n    onClick: onReset,\n    style: {\n      backgroundColor: '#C2CFE0',\n      borderColor: '#C2CFE0',\n      height: 40,\n      width: 110,\n      marginBottom: '0px !important',\n      marginRight: '2px',\n      color: 'white !important'\n    } // htmlType=\"submit\"\n    ,\n    className: \"text-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full lg:w-1/4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 41\n    }\n  }, __jsx(Text, {\n    className: \"text-custom-black \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 45\n    }\n  }, \"\\u0E23\\u0E35\\u0E40\\u0E0B\\u0E47\\u0E17\")), __jsx(Button // type=\"primary\"\n  , {\n    style: {\n      backgroundColor: '#059669',\n      borderColor: '#059669',\n      height: 40,\n      width: 110,\n      marginBottom: '0px !important',\n      color: 'white !important'\n    },\n    htmlType: \"submit\",\n    className: \"text-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full lg:w-1/4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 41\n    }\n  }, __jsx(Text, {\n    className: \"text-custom-white \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 45\n    }\n  }, \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"))))), __jsx(Form.Item, {\n    name: \"poll_options_score\",\n    label: \"\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\",\n    style: {\n      float: 'left'\n    },\n    className: \"block text-gray-700 text-sm font-bold mb-2 w-2/3\",\n    rules: [{\n      required: true,\n      message: 'กรุณากรอกคะแนนตัวเลือก'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 29\n    }\n  }, __jsx(Input, {\n    id: \"#\",\n    type: \"number\",\n    placeholder: \"\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\",\n    className: \"resize-none border rounded-md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 33\n    }\n  }))))), __jsx(\"div\", {\n    style: {\n      float: \"left\",\n      clear: \"both\"\n    },\n    ref: divRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"sources":["D:/govermentlt/components/managemnet/poll-menu/add-menu-sub.jsx"],"names":["Button","Col","Form","Input","Modal","notification","Row","Select","Typography","dynamic","React","useEffect","useRef","useState","apiInstance","Option","TextArea","config","require","JoditEditor","ssr","Text","Title","modal","_visible","hideModal","fetch","dataEdit","divRef","api","contextHolder","useNotification","visible","setVisible","patternMenuSelected","setPatternMenuSelected","patternMenu","setPatternMenu","editor","content","setContent","active","setActive","isSubMenu","setIsSubMenu","isPatternMenu","setISPatternMenu","isShow","setIsShow","form","useForm","actived","fetchPattern","menuData","get","console","log","data","results","onSubmitHandler","value","poll_questions_id","poll_options_name","poll_options_score","registerData","post","status","openNotificationSuccess","openNotificationFail","message","onReset","success","description","placement","messgae","error","resetFields","handleChange","float","required","marginBottom","backgroundColor","borderColor","height","width","marginRight","color","clear"],"mappings":"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","sourcesContent":["import { Button, Col, Form, Input, Modal, notification, Row, Select, Typography } from 'antd';\r\nimport dynamic from 'next/dynamic';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { apiInstance } from '../../../middleware/utils';\r\nconst { Option } = Select;\r\nconst { TextArea } = Input;\r\n// const config = require('./../../config');\r\nconst config = require('../../../pages/admin/config');\r\nconst JoditEditor = dynamic(() => import(\"jodit-react\"), { ssr: false });\r\nconst { Text, Title } = Typography;\r\nexport default function modal({ _visible, hideModal, fetch, dataEdit }) {\r\n    let divRef = useRef(null);\r\n    const [api, contextHolder] = notification.useNotification();\r\n    // const [divRef] = useRef(null);\r\n    const [visible, setVisible] = useState(false);\r\n    const [patternMenuSelected, setPatternMenuSelected] = useState(1);\r\n\r\n    const [patternMenu, setPatternMenu] = useState([]);\r\n    const editor = useRef(null)\r\n    const [content, setContent] = useState('')\r\n    const [active, setActive] = useState(1)\r\n    const [isSubMenu, setIsSubMenu] = useState(0)\r\n    const [isPatternMenu, setISPatternMenu] = useState(false);\r\n    const [isShow, setIsShow] = useState(true);\r\n    const [form] = Form.useForm();\r\n    const actived = () => {\r\n        active ? setActive(0) : setActive(1);\r\n        // divRef.scrollIntoView({ behavior: \"smooth\" });\r\n        // divRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n    useEffect(() => {\r\n        fetchPattern()\r\n    }, [])\r\n\r\n    const fetchPattern = async () => {\r\n        const menuData = await apiInstance().get(\r\n            'menu/pattern-menu'\r\n        );\r\n        console.log(menuData)\r\n        setPatternMenu(menuData.data.results)\r\n    }\r\n\r\n    const onSubmitHandler = async (value) => {\r\n\r\n\r\n        // organization_id: organization_id,\r\n        // menu_title: menu_title,\r\n        // menu_detail: menu_detail,\r\n        // menu_seq: menu_seq,\r\n        // have_sub: have_sub,\r\n        // is_show: is_show,\r\n        // is_primary_menu: is_primary_menu,\r\n        // is_pattern_menu: is_pattern_menu,\r\n        // pattern_menu: pattern_menu,\r\n\r\n        const data = {\r\n            \"poll_questions_id\": dataEdit.poll_questions_id,\r\n            \"poll_options_name\": value.poll_options_name,\r\n            \"poll_options_score\": value.poll_options_score ? value.poll_options_score : 0,\r\n            \"poll_option_total_score\": 0,\r\n            \"is_deleted\": 0,\r\n            \"poll_questions_seq\": 99999,\r\n        }\r\n        console.log(data)\r\n        const registerData = await apiInstance().post('/pollmenu/question-option', data);\r\n        if (registerData.data.status == 200) {\r\n            openNotificationSuccess()\r\n\r\n\r\n        } else {\r\n            openNotificationFail(registerData.data.message)\r\n\r\n        }\r\n\r\n        hideModal()\r\n        onReset()\r\n        fetch()\r\n    }\r\n\r\n    const openNotificationSuccess = () => {\r\n        api.success({\r\n            message: `บันทึกมูลสำเร็จ`,\r\n            description: 'บันทึกมูลสำเร็จ',\r\n            placement: 'topRight',\r\n        });\r\n    };\r\n\r\n    const openNotificationFail = (messgae) => {\r\n        api.error({\r\n            message: `พบปัญหาระหว่างการบันทึกข้อมูล`,\r\n            description: messgae,\r\n            placement: 'topRight',\r\n        });\r\n    };\r\n\r\n\r\n    const onReset = () => {\r\n        setActive(1)\r\n        setIsSubMenu(0)\r\n        setISPatternMenu(false)\r\n        setPatternMenuSelected(1)\r\n        setIsShow(true)\r\n        form.resetFields();\r\n\r\n    }\r\n\r\n    function handleChange(value) {\r\n        console.log(`selected ${value}`);\r\n        setPatternMenuSelected(value)\r\n        if (!isSubMenu) {\r\n            if (value != 1) {\r\n                // setIsSubMenu(1)\r\n                // setISPatternMenu(true)\r\n                setIsShow(false)\r\n\r\n            } else {\r\n                // setIsSubMenu(0)\r\n\r\n                // setISPatternMenu(false)\r\n                setIsShow(true)\r\n\r\n            }\r\n        }\r\n\r\n        // setMenu(value);\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n\r\n            {contextHolder}\r\n            <Modal\r\n                title={\"เพิ่มตัวเลือก\"}\r\n                className=\"mt-4 \"\r\n                centered\r\n                visible={_visible}\r\n                // onOk={() => onOK()}\r\n                onCancel={() => {\r\n                    hideModal()\r\n                    setActive(1)\r\n                    setIsSubMenu(0)\r\n                    form.resetFields();\r\n                }}\r\n                width={1000}\r\n                footer={null}\r\n            >\r\n                <Row>\r\n                    <Col span={24}>\r\n                        <Form\r\n                            name=\"basic\"\r\n                            layout=\"vertical\"\r\n                            onFinish={onSubmitHandler}\r\n                            requiredMark={true}\r\n                            form={form}\r\n                        >\r\n                            <Form.Item\r\n                                name=\"poll_options_name\"\r\n                                label=\"ชื่อตัวเลือก\"\r\n                                style={{ float: 'left' }}\r\n                                className=\"block text-gray-700 text-sm font-bold mb-2 w-2/3\"\r\n                                rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: 'กรุณากรอกชื่อตัวเลือก',\r\n                                    },\r\n                                ]}\r\n                            >\r\n                                <Input\r\n                                    id=\"#\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"ชื่อตัวเลือก\"\r\n                                    className=\"resize-none border rounded-md\"\r\n                                />\r\n                            </Form.Item>\r\n\r\n                            <Form.Item\r\n                                className=\"flex mt-6 mb-0 w-1/3\"\r\n                                style={{ marginBottom: 0 }}\r\n                            >\r\n                                <div className=\"lg:inline-flex w-full mt-6\">\r\n                                    <div className=\"text-center lg:text-right w-full lg:w-full\">\r\n                                        <Button\r\n                                            htmlType=\"button\"\r\n                                            onClick={onReset}\r\n                                            style={{\r\n                                                backgroundColor: '#C2CFE0',\r\n                                                borderColor: '#C2CFE0',\r\n                                                height: 40,\r\n                                                width: 110,\r\n                                                marginBottom: '0px !important',\r\n                                                marginRight: '2px',\r\n                                                color: 'white !important',\r\n                                            }}\r\n                                            // htmlType=\"submit\"\r\n                                            className=\"text-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full lg:w-1/4\"\r\n                                        >\r\n                                            <Text className=\"text-custom-black \">รีเซ็ท</Text>\r\n                                        </Button>\r\n                                        <Button\r\n                                            // type=\"primary\"\r\n                                            style={{\r\n                                                backgroundColor: '#059669',\r\n                                                borderColor: '#059669',\r\n                                                height: 40,\r\n                                                width: 110,\r\n                                                marginBottom: '0px !important',\r\n                                                color: 'white !important',\r\n                                            }}\r\n                                            htmlType=\"submit\"\r\n                                            className=\"text-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full lg:w-1/4\"\r\n                                        >\r\n                                            <Text className=\"text-custom-white \">บันทึก</Text>\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                name=\"poll_options_score\"\r\n                                label=\"คะแนนตัวเลือก\"\r\n                                style={{ float: 'left' }}\r\n                                className=\"block text-gray-700 text-sm font-bold mb-2 w-2/3\"\r\n                                rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: 'กรุณากรอกคะแนนตัวเลือก',\r\n                                    },\r\n                                ]}\r\n                            >\r\n                                <Input\r\n                                    id=\"#\"\r\n                                    type=\"number\"\r\n                                    placeholder=\"คะแนนตัวเลือก\"\r\n                                    className=\"resize-none border rounded-md\"\r\n                                />\r\n                            </Form.Item>\r\n                        </Form>\r\n                    </Col>\r\n                </Row>\r\n                <div style={{ float: \"left\", clear: \"both\" }}\r\n                    ref={divRef}>\r\n                </div>\r\n            </Modal>\r\n        </>\r\n\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}