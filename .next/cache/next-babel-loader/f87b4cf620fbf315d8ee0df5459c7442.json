{"ast":null,"code":"var _jsxFileName = \"D:\\\\govermentlt\\\\pages\\\\admin\\\\management-menu\\\\secoundary-menu\\\\index.js\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport React, { useEffect, useState } from \"react\";\nimport ReactDragListView from \"react-drag-listview\";\nimport { DragOutlined, CheckCircleOutlined, MinusCircleOutlined } from \"@ant-design/icons\";\n/* utils */\n\nimport { absoluteUrl, checkIsLogin, apiInstance } from '../../../../middleware/utils';\n/* components */\n\nimport Layout from '../../../../components/layout/LayoutAdmin';\nimport ModalAddMenu from '../../../../components/managemnet/secondary-menu/add-menu';\nimport ModalEditMenu from '../../../../components/managemnet/secondary-menu/edit-menu';\nimport ModalAddMenuSub from '../../../../components/managemnet/secondary-menu/add-menu-sub';\nimport ModalEditMenuSub from '../../../../components/managemnet/primary-menu/edit-menu-sub'; // import UserNav from '../components/navigation/User';\n\nimport { Carousel, Row, Col, Typography, Image, Button, Input, Card, List, notification, Spin, Modal, Tag, Empty } from 'antd';\nimport { compareSync } from 'bcryptjs';\nconst {\n  Text,\n  Title\n} = Typography;\nconst {\n  TextArea\n} = Input;\n/*\r\n  This example uses react-drag-listview, and AntDesign which can be found\r\n  at their respective links below:\r\n  https://github.com/raisezhang/react-drag-listview#readme\r\n  https://ant.design/docs/react/introduce\r\n*/\n\n/* MOCK DATA: parent list as Value, subList as subList */\n\nconst mockData = [{\n  id: \"category-one\",\n  value: \"Category One\",\n  subList: [\"Eget odio bibendum commodo malesuada Mattis montes.\", \"Nullam at rhoncus. Erat pretium pharetra auctor.\", \"Justo sed interdum sociosqu a molestie nascetur nostra metus.\"]\n}, {\n  id: \"category-two\",\n  value: \"Category Two\",\n  subList: [\"Senectus libero blandit consectetuer penatibus gravida quisque lacinia id nunc.\", \"Elit. Ac. Nulla justo nibh. Fringilla, class Tempor consequat proin.\"]\n}];\nexport default function Home(props) {\n  const [api, contextHolder] = notification.useNotification();\n  const {\n    0: menus,\n    1: setMenus\n  } = useState([]);\n  const {\n    user,\n    origin\n  } = props;\n  const {\n    0: login,\n    1: setLogin\n  } = useState(null);\n  const {\n    0: data,\n    1: setData\n  } = useState(mockData);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: dataDelete,\n    1: setDataDelete\n  } = useState(null);\n  const {\n    0: dataEdit,\n    1: setDataEdit\n  } = useState(null);\n  const {\n    0: visibleModalDelete,\n    1: setVisibleModalDelete\n  } = useState(false);\n  const {\n    0: visibleEditModal,\n    1: setVisibleEditModal\n  } = useState(false);\n  const {\n    0: visibleEditMenuSubModal,\n    1: setVisibleEditMenuSubModal\n  } = useState(false);\n  const {\n    0: visibleAddSubMenuModal,\n    1: setVisibleAddSubMenuModal\n  } = useState(false);\n  const {\n    0: visibleModalMenuSubDelete,\n    1: setVisibleModalMenuSubDelete\n  } = useState(false);\n  useEffect(() => {\n    fetch();\n  }, []);\n\n  const fetch = async (params = {}) => {\n    setLoading(true); // setVisibleEditModal(false)\n\n    const menuData = await apiInstance().get('menu?is_primary_menu=0&organization_id=' + (!user ? 0 : user.organization_id));\n    console.log(menuData);\n    setMenus(menuData.data.results);\n    setTimeout(function () {\n      //Start the timer\n      setLoading(false);\n    }.bind(this), 800);\n  };\n  /*\r\n    REORDER ACCEPTS:\r\n      list: arr, accepts array of data to be reordered,\r\n      fromIndex: int, onDragStart index,\r\n      toIndex: int, onDragEnd index,\r\n  */\n\n\n  const reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n    return result;\n  };\n  /*\r\n    ON DRAG END EVENT HANDLER ACCEPTS:\r\n      fromIndex: int, onDragStart index,\r\n      toIndex: int, onDragEnd index,\r\n      type: str, ReactDragListView Identifier,\r\n      index: MUST be parent list index,\r\n  */\n\n\n  const onDragEnd = async (fromIndex, toIndex, type, index) => {\n    setLoading(true);\n    /* IGNORES DRAG IF OUTSIDE DESIGNATED AREA */\n\n    if (toIndex < 0) return;\n    /* REORDER PARENT OR SUBLIST, ELSE THROW ERROR */\n\n    if (type === \"LIST-ITEM\") {\n      const _data = {\n        \"menu_id\": menus[fromIndex].menu_id,\n        \"menu_seq\": toIndex\n      };\n      const menuData = await apiInstance().put('menu/reorder-menu', _data);\n      const _dataRevert = {\n        \"menu_id\": menus[toIndex].menu_id,\n        \"menu_seq\": fromIndex\n      };\n      const menuDataRevert = await apiInstance().put('menu/reorder-menu', _dataRevert); // console.log(menuDataRevert)\n\n      return fetch(); // const categories = reorder(data, fromIndex, toIndex);\n      // return setData(categories);\n    } else if (type === \"SUBLIST-ITEM\") {\n      console.log(\" onDragEnd LIST-ITEM\");\n      console.log(fromIndex);\n      console.log(toIndex);\n      console.log(type);\n      console.log(index);\n      console.log(menus[index].menu_subs[fromIndex]);\n      console.log(menus[index].menu_subs[toIndex]);\n      const _data = {\n        \"menu_sub_id\": menus[index].menu_subs[fromIndex].menu_sub_id,\n        \"menu_seq\": toIndex\n      };\n      const menuData = await apiInstance().put('menu/reorder-menu-sub', _data);\n      const _dataRevert = {\n        \"menu_sub_id\": menus[index].menu_subs[toIndex].menu_sub_id,\n        \"menu_seq\": fromIndex\n      };\n      const menuDataRevert = await apiInstance().put('menu/reorder-menu-sub', _dataRevert); // const subList = reorder(data[index].subList, fromIndex, toIndex);\n      // const categories = JSON.parse(JSON.stringify(data));\n      // categories[index].subList = subList;\n      // return setData(categories);\n\n      return fetch();\n    } else return new Error(\"NOT A VALID LIST\");\n  };\n  /*\\\r\n    nodeSelector={}, DRAGGABLE ELEMENT IDENTIFIER, i.e 'li', ant-list.draggable>\r\n    ALL STYLES APPLIED TO lineClassName MUST BE OVERRIDDEN WITH !important\r\n  */\n\n\n  const onDelete = async value => {\n    // console.log('DELETE')\n    const registerData = await apiInstance().delete('menu/' + dataDelete.menu_id, {});\n\n    if (registerData.data.status == 200) {\n      openNotificationSuccess(); // fetchOrganizationData();\n\n      setVisibleModalDelete(false);\n      fetch();\n    } else {\n      openNotificationFail(registerData.data.message);\n    }\n  };\n\n  const onMenuSubDelete = async value => {\n    // console.log('DELETE')\n    const registerData = await apiInstance().delete('menu-sub/' + dataDelete.menu_sub_id, {});\n\n    if (registerData.data.status == 200) {\n      openNotificationSuccess(); // fetchOrganizationData();\n\n      setVisibleModalMenuSubDelete(false);\n      fetch();\n    } else {\n      openNotificationFail(registerData.data.message);\n    }\n  };\n\n  const openNotificationSuccess = () => {\n    api.success({\n      message: `ลบข้อมูลสำเร็จ`,\n      description: 'ลบข้อมูลสำเร็จ',\n      placement: 'topRight'\n    });\n  };\n\n  const openNotificationFail = messgae => {\n    api.error({\n      message: `พบปัญหาระหว่างการลบข้อมูล`,\n      description: messgae,\n      placement: 'topRight'\n    });\n  };\n\n  const hideModal = () => {\n    setVisibleModalDelete(false);\n  };\n\n  const hideMenuSubModal = () => {\n    setVisibleModalMenuSubDelete(false);\n  };\n\n  const showModal = data => {\n    console.log('data deletd');\n    console.log(data);\n    setDataDelete(data);\n    setVisibleModalDelete(true);\n  };\n\n  const showDeletMenuSubModal = data => {\n    console.log('data deletd');\n    console.log(data);\n    setDataDelete(data);\n    setVisibleModalMenuSubDelete(true);\n  };\n\n  const onclikEditModal = (value, obj) => {\n    // compareSync\n    console.log(\"onclikEditModal\");\n    setDataEdit(obj);\n    setVisibleEditModal(value);\n  };\n\n  const onclikEditMenuSubModal = (value, obj) => {\n    // compareSync\n    setDataEdit(obj);\n    setVisibleEditMenuSubModal(value);\n  };\n\n  const onclikAddSubMenuModal = (value, obj) => {\n    // compareSync\n    console.log(\"onclikEditModal\");\n    setDataEdit(obj);\n    setVisibleAddSubMenuModal(value);\n  };\n\n  const hideEditModal = () => {\n    // setVisibleModalDelete(false)\n    setVisibleEditModal(false);\n  };\n\n  const hideSubMenuModal = () => {\n    // setVisibleModalDelete(false)\n    setVisibleAddSubMenuModal(false);\n  };\n\n  const hideEditMenuSubModal = () => {\n    // setVisibleModalDelete(false)\n    setVisibleEditMenuSubModal(false);\n  };\n\n  return __jsx(Layout, {\n    title: \"Government - Admin management\",\n    url: origin,\n    origin: origin,\n    user: login,\n    isMain: true,\n    indexSubMenu: \"2\",\n    indexMenu: \"sub-2-1\",\n    titlePage: \"เมนูรอง\",\n    _routes: [{\n      path: '/admin/dashborad',\n      breadcrumbName: 'หน้าหลัก'\n    }, {\n      path: '',\n      breadcrumbName: 'เมนูรอง'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }\n  }, contextHolder, __jsx(ModalAddMenu, {\n    fetch: fetch,\n    user: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 9\n    }\n  }), __jsx(ModalEditMenu, {\n    _visible: visibleEditModal,\n    hideEditModal: hideEditModal,\n    fetch: fetch,\n    user: user,\n    dataEdit: dataEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 9\n    }\n  }), __jsx(ModalEditMenuSub, {\n    _visible: visibleEditMenuSubModal,\n    hideModal: hideEditMenuSubModal,\n    fetch: fetch,\n    user: user,\n    dataEdit: dataEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 9\n    }\n  }), __jsx(ModalAddMenuSub, {\n    _visible: visibleAddSubMenuModal,\n    hideModal: hideSubMenuModal,\n    fetch: fetch,\n    user: user,\n    dataEdit: dataEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }\n  }), __jsx(Spin, {\n    spinning: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 9\n    }\n  }, __jsx(ReactDragListView, {\n    nodeSelector: \".ant-list.draggable\",\n    lineClassName: \"dragLine\",\n    onDragEnd: (fromIndex, toIndex) => onDragEnd(fromIndex, toIndex, \"LIST-ITEM\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 11\n    }\n  }, menus.length == 0 && __jsx(Empty, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 35\n    }\n  }), menus.map((obj, index) => __jsx(List, {\n    header: __jsx(React.Fragment, null, __jsx(Typography.Text, {\n      strong: true,\n      className: \"grabbable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 21\n      }\n    }, __jsx(DragOutlined, {\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 23\n      }\n    }), obj.menu_title), __jsx(Tag, {\n      color: obj.is_show == 1 ? \"success\" : \"default\",\n      style: {\n        marginLeft: \"10px\",\n        marginRight: \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 21\n      }\n    }, obj.is_show == 1 ? \"ใช้งาน\" : \"ไม่ใช้งาน\"), __jsx(Button, {\n      className: \"ml-2\",\n      type: \"default\",\n      onClick: () => {\n        onclikEditModal(true, obj);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 21\n      }\n    }, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"), obj.have_sub == 1 && __jsx(Button, {\n      style: {\n        backgroundColor: \"#059669\",\n        color: \"white\",\n        borderColor: \"#059669\"\n      },\n      onClick: () => {\n        onclikAddSubMenuModal(true, obj);\n      },\n      className: \"ml-2\",\n      type: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 43\n      }\n    }, \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E21\\u0E19\\u0E39\\u0E22\\u0E48\\u0E2D\\u0E22\"), __jsx(Button, {\n      className: \"ml-2\",\n      type: \"danger\",\n      onClick: () => showModal(obj),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 21\n      }\n    }, \"\\u0E25\\u0E1A\")),\n    key: index,\n    className: \"draggable\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 15\n    }\n  }, __jsx(ReactDragListView, {\n    nodeSelector: \".ant-list-item.draggable-item\",\n    lineClassName: \"dragLine\",\n    onDragEnd: (fromIndex, toIndex) => onDragEnd(fromIndex, toIndex, \"SUBLIST-ITEM\", index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 17\n    }\n  }, obj.have_sub == 1 && __jsx(React.Fragment, null, obj.menu_subs.map((item, index2) => __jsx(List.Item, {\n    key: index2,\n    className: \"draggable-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 23\n    }\n  }, __jsx(DragOutlined, {\n    className: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 25\n    }\n  }), __jsx(List.Item.Meta, {\n    title: item.menu_title,\n    className: \"grabbable\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 25\n    }\n  }), __jsx(Tag, {\n    color: item.is_show == 1 ? \"success\" : \"default\",\n    style: {\n      marginLeft: \"10px\",\n      marginRight: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 25\n    }\n  }, item.is_show == 1 ? \"ใช้งาน\" : \"ไม่ใช้งาน\"), __jsx(Button, {\n    className: \"mr-1\",\n    type: \"default\",\n    onClick: () => {\n      onclikEditMenuSubModal(true, item);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 25\n    }\n  }, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"), __jsx(Button, {\n    className: \"mr-2\",\n    type: \"danger\",\n    onClick: () => showDeletMenuSubModal(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 25\n    }\n  }, \"\\u0E25\\u0E1A\")))))))))), __jsx(Modal, {\n    title: \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?\",\n    visible: visibleModalDelete,\n    onOk: onDelete,\n    onCancel: hideModal,\n    okText: \"\\u0E25\\u0E1A\",\n    cancelText: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",\n    okButtonProps: {\n      'type': \"primary\",\n      'danger': true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 9\n    }\n  }, \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A \\\"\", dataDelete ? dataDelete.menu_title : \"\", \"\\\" \\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?  \")), __jsx(Modal, {\n    title: \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?\",\n    visible: visibleModalMenuSubDelete,\n    onOk: onMenuSubDelete,\n    onCancel: hideMenuSubModal,\n    okText: \"\\u0E25\\u0E1A\",\n    cancelText: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",\n    okButtonProps: {\n      'type': \"primary\",\n      'danger': true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 9\n    }\n  }, \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A \\\"\", dataDelete ? dataDelete.menu_title : \"\", \"\\\" \\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?  \")));\n}\n/* getServerSideProps */\n\nexport async function getServerSideProps(context) {\n  const {\n    req\n  } = context;\n  const {\n    origin\n  } = absoluteUrl(req);\n  return {\n    props: {\n      origin\n    }\n  };\n}","map":{"version":3,"sources":["D:/govermentlt/pages/admin/management-menu/secoundary-menu/index.js"],"names":["Link","React","useEffect","useState","ReactDragListView","DragOutlined","CheckCircleOutlined","MinusCircleOutlined","absoluteUrl","checkIsLogin","apiInstance","Layout","ModalAddMenu","ModalEditMenu","ModalAddMenuSub","ModalEditMenuSub","Carousel","Row","Col","Typography","Image","Button","Input","Card","List","notification","Spin","Modal","Tag","Empty","compareSync","Text","Title","TextArea","mockData","id","value","subList","Home","props","api","contextHolder","useNotification","menus","setMenus","user","origin","login","setLogin","data","setData","loading","setLoading","dataDelete","setDataDelete","dataEdit","setDataEdit","visibleModalDelete","setVisibleModalDelete","visibleEditModal","setVisibleEditModal","visibleEditMenuSubModal","setVisibleEditMenuSubModal","visibleAddSubMenuModal","setVisibleAddSubMenuModal","visibleModalMenuSubDelete","setVisibleModalMenuSubDelete","fetch","params","menuData","get","organization_id","console","log","results","setTimeout","bind","reorder","list","startIndex","endIndex","result","Array","from","removed","splice","onDragEnd","fromIndex","toIndex","type","index","_data","menu_id","put","_dataRevert","menuDataRevert","menu_subs","menu_sub_id","Error","onDelete","registerData","delete","status","openNotificationSuccess","openNotificationFail","message","onMenuSubDelete","success","description","placement","messgae","error","hideModal","hideMenuSubModal","showModal","showDeletMenuSubModal","onclikEditModal","obj","onclikEditMenuSubModal","onclikAddSubMenuModal","hideEditModal","hideSubMenuModal","hideEditMenuSubModal","path","breadcrumbName","length","map","menu_title","is_show","marginLeft","marginRight","have_sub","backgroundColor","color","borderColor","item","index2","getServerSideProps","context","req"],"mappings":"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","sourcesContent":["import Link from 'next/link';\r\nimport React, { useEffect, useState } from \"react\";\r\nimport ReactDragListView from \"react-drag-listview\";\r\nimport { DragOutlined, CheckCircleOutlined, MinusCircleOutlined } from \"@ant-design/icons\";\r\n/* utils */\r\nimport { absoluteUrl, checkIsLogin, apiInstance } from '../../../../middleware/utils';\r\n\r\n/* components */\r\nimport Layout from '../../../../components/layout/LayoutAdmin';\r\nimport ModalAddMenu from '../../../../components/managemnet/secondary-menu/add-menu';\r\nimport ModalEditMenu from '../../../../components/managemnet/secondary-menu/edit-menu';\r\nimport ModalAddMenuSub from '../../../../components/managemnet/secondary-menu/add-menu-sub';\r\nimport ModalEditMenuSub from '../../../../components/managemnet/primary-menu/edit-menu-sub';\r\n\r\n\r\n// import UserNav from '../components/navigation/User';\r\n\r\nimport {\r\n  Carousel,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Image,\r\n  Button,\r\n  Input,\r\n  Card,\r\n  List,\r\n  notification,\r\n  Spin,\r\n  Modal,\r\n  Tag,\r\n  Empty\r\n} from 'antd';\r\nimport { compareSync } from 'bcryptjs';\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nconst { TextArea } = Input;\r\n\r\n\r\n/*\r\n  This example uses react-drag-listview, and AntDesign which can be found\r\n  at their respective links below:\r\n  https://github.com/raisezhang/react-drag-listview#readme\r\n  https://ant.design/docs/react/introduce\r\n*/\r\n\r\n/* MOCK DATA: parent list as Value, subList as subList */\r\nconst mockData = [\r\n  {\r\n    id: \"category-one\",\r\n    value: \"Category One\",\r\n    subList: [\r\n      \"Eget odio bibendum commodo malesuada Mattis montes.\",\r\n      \"Nullam at rhoncus. Erat pretium pharetra auctor.\",\r\n      \"Justo sed interdum sociosqu a molestie nascetur nostra metus.\"\r\n    ]\r\n  },\r\n  {\r\n    id: \"category-two\",\r\n    value: \"Category Two\",\r\n    subList: [\r\n      \"Senectus libero blandit consectetuer penatibus gravida quisque lacinia id nunc.\",\r\n      \"Elit. Ac. Nulla justo nibh. Fringilla, class Tempor consequat proin.\"\r\n    ]\r\n  }\r\n];\r\n\r\nexport default function Home(props) {\r\n  const [api, contextHolder] = notification.useNotification();\r\n  const [menus, setMenus] = useState([])\r\n  const { user, origin } = props;\r\n  const [login, setLogin] = useState(null)\r\n  const [data, setData] = useState(mockData);\r\n  const [loading, setLoading] = useState(false);\r\n  const [dataDelete, setDataDelete] = useState(null)\r\n  const [dataEdit, setDataEdit] = useState(null)\r\n  const [visibleModalDelete, setVisibleModalDelete] = useState(false)\r\n  const [visibleEditModal, setVisibleEditModal] = useState(false)\r\n  const [visibleEditMenuSubModal, setVisibleEditMenuSubModal] = useState(false)\r\n  const [visibleAddSubMenuModal, setVisibleAddSubMenuModal] = useState(false)\r\n  const [visibleModalMenuSubDelete, setVisibleModalMenuSubDelete] = useState(false)\r\n\r\n  useEffect(() => {\r\n\r\n    fetch()\r\n  }, [])\r\n\r\n\r\n  const fetch = async (params = {}) => {\r\n    setLoading(true)\r\n    // setVisibleEditModal(false)\r\n    const menuData = await apiInstance().get(\r\n      'menu?is_primary_menu=0&organization_id=' + (!user ? 0 : user.organization_id)\r\n    );\r\n    console.log(menuData)\r\n    setMenus(menuData.data.results)\r\n    setTimeout(function () { //Start the timer\r\n      setLoading(false)\r\n    }.bind(this), 800)\r\n\r\n  };\r\n  /*\r\n    REORDER ACCEPTS:\r\n      list: arr, accepts array of data to be reordered,\r\n      fromIndex: int, onDragStart index,\r\n      toIndex: int, onDragEnd index,\r\n  */\r\n\r\n  const reorder = (list, startIndex, endIndex) => {\r\n    const result = Array.from(list);\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n    return result;\r\n  };\r\n\r\n  /*\r\n    ON DRAG END EVENT HANDLER ACCEPTS:\r\n      fromIndex: int, onDragStart index,\r\n      toIndex: int, onDragEnd index,\r\n      type: str, ReactDragListView Identifier,\r\n      index: MUST be parent list index,\r\n  */\r\n\r\n  const onDragEnd = async (fromIndex, toIndex, type, index) => {\r\n    setLoading(true)\r\n    /* IGNORES DRAG IF OUTSIDE DESIGNATED AREA */\r\n    if (toIndex < 0) return;\r\n\r\n    /* REORDER PARENT OR SUBLIST, ELSE THROW ERROR */\r\n    if (type === \"LIST-ITEM\") {\r\n\r\n      const _data = {\r\n        \"menu_id\": menus[fromIndex].menu_id,\r\n        \"menu_seq\": toIndex,\r\n      }\r\n      const menuData = await apiInstance().put(\r\n        'menu/reorder-menu', _data\r\n      );\r\n\r\n      const _dataRevert = {\r\n        \"menu_id\": menus[toIndex].menu_id,\r\n        \"menu_seq\": fromIndex,\r\n      }\r\n      const menuDataRevert = await apiInstance().put(\r\n        'menu/reorder-menu', _dataRevert\r\n      );\r\n      // console.log(menuDataRevert)\r\n      return fetch()\r\n      // const categories = reorder(data, fromIndex, toIndex);\r\n      // return setData(categories);\r\n    } else if (type === \"SUBLIST-ITEM\") {\r\n      console.log(\" onDragEnd LIST-ITEM\")\r\n      console.log(fromIndex)\r\n      console.log(toIndex)\r\n      console.log(type)\r\n      console.log(index)\r\n      console.log(menus[index].menu_subs[fromIndex])\r\n      console.log(menus[index].menu_subs[toIndex])\r\n      const _data = {\r\n        \"menu_sub_id\": menus[index].menu_subs[fromIndex].menu_sub_id,\r\n        \"menu_seq\": toIndex,\r\n      }\r\n      const menuData = await apiInstance().put(\r\n        'menu/reorder-menu-sub', _data\r\n      );\r\n\r\n      const _dataRevert = {\r\n        \"menu_sub_id\": menus[index].menu_subs[toIndex].menu_sub_id,\r\n        \"menu_seq\": fromIndex,\r\n      }\r\n      const menuDataRevert = await apiInstance().put(\r\n        'menu/reorder-menu-sub', _dataRevert\r\n      );\r\n\r\n      // const subList = reorder(data[index].subList, fromIndex, toIndex);\r\n      // const categories = JSON.parse(JSON.stringify(data));\r\n      // categories[index].subList = subList;\r\n      // return setData(categories);\r\n      return fetch()\r\n    } else return new Error(\"NOT A VALID LIST\");\r\n  };\r\n  /*\\\r\n    nodeSelector={}, DRAGGABLE ELEMENT IDENTIFIER, i.e 'li', ant-list.draggable>\r\n    ALL STYLES APPLIED TO lineClassName MUST BE OVERRIDDEN WITH !important\r\n  */\r\n\r\n  const onDelete = async (value) => {\r\n    // console.log('DELETE')\r\n\r\n    const registerData = await apiInstance().delete('menu/' + dataDelete.menu_id, {});\r\n    if (registerData.data.status == 200) {\r\n      openNotificationSuccess()\r\n      // fetchOrganizationData();\r\n      setVisibleModalDelete(false)\r\n      fetch();\r\n    } else {\r\n      openNotificationFail(registerData.data.message)\r\n\r\n    }\r\n  }\r\n  const onMenuSubDelete = async (value) => {\r\n    // console.log('DELETE')\r\n\r\n    const registerData = await apiInstance().delete('menu-sub/' + dataDelete.menu_sub_id, {});\r\n    if (registerData.data.status == 200) {\r\n      openNotificationSuccess()\r\n      // fetchOrganizationData();\r\n      setVisibleModalMenuSubDelete(false)\r\n      fetch();\r\n    } else {\r\n      openNotificationFail(registerData.data.message)\r\n\r\n    }\r\n  }\r\n\r\n  const openNotificationSuccess = () => {\r\n    api.success({\r\n      message: `ลบข้อมูลสำเร็จ`,\r\n      description: 'ลบข้อมูลสำเร็จ',\r\n      placement: 'topRight',\r\n    });\r\n  };\r\n\r\n  const openNotificationFail = (messgae) => {\r\n    api.error({\r\n      message: `พบปัญหาระหว่างการลบข้อมูล`,\r\n      description: messgae,\r\n      placement: 'topRight',\r\n    });\r\n  };\r\n\r\n  const hideModal = () => {\r\n    setVisibleModalDelete(false)\r\n  };\r\n\r\n  const hideMenuSubModal = () => {\r\n    setVisibleModalMenuSubDelete(false)\r\n  };\r\n\r\n  const showModal = (data) => {\r\n    console.log('data deletd')\r\n    console.log(data)\r\n    setDataDelete(data)\r\n    setVisibleModalDelete(true)\r\n  };\r\n  const showDeletMenuSubModal = (data) => {\r\n    console.log('data deletd')\r\n    console.log(data)\r\n    setDataDelete(data)\r\n    setVisibleModalMenuSubDelete(true)\r\n  };\r\n\r\n  const onclikEditModal = (value, obj) => {\r\n    // compareSync\r\n    console.log(\"onclikEditModal\")\r\n    setDataEdit(obj)\r\n    setVisibleEditModal(value)\r\n  };\r\n\r\n  const onclikEditMenuSubModal = (value, obj) => {\r\n    // compareSync\r\n    setDataEdit(obj)\r\n    setVisibleEditMenuSubModal(value)\r\n  };\r\n\r\n\r\n  const onclikAddSubMenuModal = (value, obj) => {\r\n    // compareSync\r\n    console.log(\"onclikEditModal\")\r\n    setDataEdit(obj)\r\n    setVisibleAddSubMenuModal(value)\r\n  };\r\n\r\n\r\n  const hideEditModal = () => {\r\n    // setVisibleModalDelete(false)\r\n    setVisibleEditModal(false)\r\n\r\n  };\r\n  const hideSubMenuModal = () => {\r\n    // setVisibleModalDelete(false)\r\n    setVisibleAddSubMenuModal(false)\r\n\r\n  };\r\n  const hideEditMenuSubModal = () => {\r\n    // setVisibleModalDelete(false)\r\n    setVisibleEditMenuSubModal(false)\r\n\r\n  };\r\n\r\n\r\n  return (\r\n    <Layout title=\"Government - Admin management\" url={origin} origin={origin} user={login}\r\n      isMain={true}\r\n      indexSubMenu={\"2\"}\r\n      indexMenu={\"sub-2-1\"}\r\n      titlePage={\"เมนูรอง\"}\r\n      _routes={[\r\n        {\r\n          path: '/admin/dashborad',\r\n          breadcrumbName: 'หน้าหลัก',\r\n        }, {\r\n          path: '',\r\n          breadcrumbName: 'เมนูรอง',\r\n        }]}\r\n    >\r\n      <div>\r\n        {contextHolder}\r\n        <ModalAddMenu fetch={fetch} user={user} />\r\n        <ModalEditMenu _visible={visibleEditModal} hideEditModal={hideEditModal} fetch={fetch} user={user} dataEdit={dataEdit} />\r\n        <ModalEditMenuSub _visible={visibleEditMenuSubModal} hideModal={hideEditMenuSubModal} fetch={fetch} user={user} dataEdit={dataEdit} />\r\n        <ModalAddMenuSub _visible={visibleAddSubMenuModal} hideModal={hideSubMenuModal} fetch={fetch} user={user} dataEdit={dataEdit} />\r\n        <Spin spinning={loading}>\r\n          <ReactDragListView\r\n            nodeSelector=\".ant-list.draggable\"\r\n            lineClassName=\"dragLine\"\r\n            onDragEnd={(fromIndex, toIndex) =>\r\n              onDragEnd(fromIndex, toIndex, \"LIST-ITEM\")\r\n            }\r\n          >\r\n            {menus.length == 0 && <Empty />}\r\n            {menus.map((obj, index) => (\r\n              <List\r\n                header={\r\n                  <>\r\n                    <Typography.Text strong className=\"grabbable\">\r\n                      <DragOutlined className=\"icon\" />\r\n                      {obj.menu_title}\r\n\r\n                    </Typography.Text>\r\n                    <Tag color={obj.is_show == 1 ? \"success\" : \"default\"} style={{ marginLeft: \"10px\", marginRight: \"0px\" }}>{obj.is_show == 1 ? \"ใช้งาน\" : \"ไม่ใช้งาน\"}</Tag>\r\n                    <Button className=\"ml-2\" type=\"default\" onClick={() => { onclikEditModal(true, obj) }}>แก้ไข</Button>\r\n                    {obj.have_sub == 1 && <Button style={{ backgroundColor: \"#059669\", color: \"white\", borderColor: \"#059669\" }} onClick={() => { onclikAddSubMenuModal(true, obj) }} className=\"ml-2\" type=\"success\">เพิ่มเมนูย่อย</Button>}\r\n                    <Button className=\"ml-2\" type=\"danger\" onClick={() => showModal(obj)}>ลบ</Button>\r\n                  </>\r\n                }\r\n                key={index}\r\n                className=\"draggable\"\r\n              >\r\n                <ReactDragListView\r\n                  nodeSelector=\".ant-list-item.draggable-item\"\r\n                  lineClassName=\"dragLine\"\r\n                  onDragEnd={(fromIndex, toIndex) =>\r\n                    onDragEnd(fromIndex, toIndex, \"SUBLIST-ITEM\", index)\r\n                  }\r\n                >\r\n                  {obj.have_sub == 1 && <>\r\n                    {obj.menu_subs.map((item, index2) => (\r\n                      <List.Item key={index2} className=\"draggable-item\">\r\n                        <DragOutlined className=\"icon\" />\r\n                        <List.Item.Meta title={item.menu_title} className=\"grabbable\" />\r\n                        <Tag color={item.is_show == 1 ? \"success\" : \"default\"} style={{ marginLeft: \"10px\", marginRight: \"10px\" }}>{item.is_show == 1 ? \"ใช้งาน\" : \"ไม่ใช้งาน\"}</Tag>\r\n                        <Button className=\"mr-1\" type=\"default\" onClick={() => { onclikEditMenuSubModal(true, item) }}>แก้ไข</Button>\r\n                        <Button className=\"mr-2\" type=\"danger\" onClick={() => showDeletMenuSubModal(item)}>ลบ</Button>\r\n                      </List.Item>\r\n                    ))}\r\n                  </>\r\n                  }\r\n\r\n\r\n\r\n                </ReactDragListView>\r\n              </List>\r\n            ))}\r\n\r\n\r\n          </ReactDragListView>\r\n        </Spin>\r\n      </div>\r\n\r\n      <Modal\r\n        title=\"คุณต้องการลบข้อมูลหรือไม่?\"\r\n        visible={visibleModalDelete}\r\n        onOk={onDelete}\r\n        onCancel={hideModal}\r\n        okText=\"ลบ\"\r\n        cancelText=\"ยกเลิก\"\r\n        okButtonProps={{\r\n          'type': \"primary\",\r\n          'danger': true\r\n        }}\r\n      >\r\n        <p>คุณต้องการลบ \"{dataDelete ? dataDelete.menu_title : \"\"}\" หรือไม่?  </p>\r\n\r\n      </Modal>\r\n\r\n      <Modal\r\n        title=\"คุณต้องการลบข้อมูลหรือไม่?\"\r\n        visible={visibleModalMenuSubDelete}\r\n        onOk={onMenuSubDelete}\r\n        onCancel={hideMenuSubModal}\r\n        okText=\"ลบ\"\r\n        cancelText=\"ยกเลิก\"\r\n        okButtonProps={{\r\n          'type': \"primary\",\r\n          'danger': true\r\n        }}\r\n      >\r\n        <p>คุณต้องการลบ \"{dataDelete ? dataDelete.menu_title : \"\"}\" หรือไม่?  </p>\r\n\r\n      </Modal>\r\n    </Layout>\r\n  );\r\n}\r\n/* getServerSideProps */\r\nexport async function getServerSideProps(context) {\r\n  const { req } = context;\r\n  const { origin } = absoluteUrl(req);\r\n\r\n  return {\r\n    props: {\r\n      origin,\r\n    },\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}