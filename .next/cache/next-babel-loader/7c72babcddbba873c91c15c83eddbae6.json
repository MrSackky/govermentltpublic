{"ast":null,"code":"import { absoluteUrl, checkIsLogin, apiInstance } from '../../middleware/utils';\nexport function config(user) {\n  return {\n    height: \"600px\",\n    readonly: false,\n    // all options from https://xdsoft.net/jodit/doc/\n    uploader: {\n      url: \"/api/upload\",\n      insertImageAsBase64URI: false,\n      \"imagesExtensions\": [\"jpg\", \"png\", \"jpeg\", \"gif\"],\n      prepareData: function prepareData(data) {\n        if (user.type_user == 1) {\n          data.append('id', \"admin\"); // \n        } else {\n          data.append('id', user.organization_id); // \n        }\n      },\n      defaultHandlerSuccess: function defaultHandlerSuccess(data, resp) {\n        var i,\n            field = this.options.uploader.filesVariableName;\n\n        if (data.type === \"file\") {\n          console.log(\"success file\");\n          console.log(data);\n          var textHTML = \"\";\n          data.list.forEach(function (element) {\n            var extension = \"\";\n            var i = element.name.lastIndexOf('.');\n\n            if (i > 0) {\n              extension = element.name.substring(i + 1);\n            }\n\n            var _path = element.path.replace(\"public\", \"\");\n\n            if (extension == \"jpg\" || extension == \"png\" || extension == \"jpeg\" || extension == \"gif\") {\n              //your code\n              textHTML += '<img src=\"' + _path + '\"/>';\n            } else {\n              textHTML += '<a class=\"file-attach\" href=\"' + _path + '\">' + element.name + '</a></br>';\n            }\n          });\n          this.selection.insertHTML(textHTML);\n        } else {\n          console.log(\"success image\");\n          console.log(data.files[0]);\n          var textHTML = \"\"; // if (data.files && data.files.length) {\n          //   // for (i = 0; i < data.files.length; i += 1) {\n          //   // textHTML += '<img src=\"' + data.baseurl + data.files[i] + '\"/>'\n          //   // console.log( data.files[i])\n          //   this.selection.insertImage(data.files[0]);\n          //   this.selection.insertHTML(\"</br>\");\n          //   // }\n          // }\n          // this.selection.insertHTML(textHTML);\n        } // parent.selection.insertHTML('<img src=\"image.png\"/>');\n\n      }\n    } // filebrowser: {\n    //   ajax: {\n    //     url: \"/public/uploads/c-admin/\",\n    //   },\n    //   uploader: {\n    //      url:\"/api/upload\"\n    //   },\n    // },\n\n  };\n}","map":{"version":3,"sources":["C:/Users/Sackky/Desktop/govermentlt/pages/admin/config.js"],"names":["absoluteUrl","checkIsLogin","apiInstance","config","user","height","readonly","uploader","url","insertImageAsBase64URI","prepareData","data","type_user","append","organization_id","defaultHandlerSuccess","resp","i","field","options","filesVariableName","type","console","log","textHTML","list","forEach","element","extension","name","lastIndexOf","substring","_path","path","replace","selection","insertHTML","files"],"mappings":"AAAA,SACIA,WADJ,EAEIC,YAFJ,EAGIC,WAHJ,QAIO,wBAJP;AAMA,OAAO,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;AAEzB,SAAQ;AACJC,IAAAA,MAAM,EAAE,OADJ;AAEJC,IAAAA,QAAQ,EAAE,KAFN;AAEa;AACjBC,IAAAA,QAAQ,EAAE;AACNC,MAAAA,GAAG,EAAE,aADC;AAENC,MAAAA,sBAAsB,EAAE,KAFlB;AAGN,0BAAoB,CAChB,KADgB,EAEhB,KAFgB,EAGhB,MAHgB,EAIhB,KAJgB,CAHd;AASNC,MAAAA,WAAW,EAAE,qBAAUC,IAAV,EAAgB;AACzB,YAAIP,IAAI,CAACQ,SAAL,IAAkB,CAAtB,EAAyB;AACrBD,UAAAA,IAAI,CAACE,MAAL,CAAY,IAAZ,EAAkB,OAAlB,EADqB,CACO;AAE/B,SAHD,MAGO;AACHF,UAAAA,IAAI,CAACE,MAAL,CAAY,IAAZ,EAAkBT,IAAI,CAACU,eAAvB,EADG,CACsC;AAE5C;AACJ,OAjBK;AAkBNC,MAAAA,qBAAqB,EAAE,+BAAUJ,IAAV,EAAgBK,IAAhB,EAAsB;AACzC,YAAIC,CAAJ;AAAA,YAAOC,KAAK,GAAG,KAAKC,OAAL,CAAaZ,QAAb,CAAsBa,iBAArC;;AAKA,YAAIT,IAAI,CAACU,IAAL,KAAc,MAAlB,EAA0B;AACtBC,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,UAAAA,OAAO,CAACC,GAAR,CAAYZ,IAAZ;AACA,cAAIa,QAAQ,GAAG,EAAf;AACAb,UAAAA,IAAI,CAACc,IAAL,CAAUC,OAAV,CAAkB,UAAAC,OAAO,EAAI;AACzB,gBAAIC,SAAS,GAAG,EAAhB;AACA,gBAAIX,CAAC,GAAGU,OAAO,CAACE,IAAR,CAAaC,WAAb,CAAyB,GAAzB,CAAR;;AACA,gBAAIb,CAAC,GAAG,CAAR,EAAW;AACPW,cAAAA,SAAS,GAAGD,OAAO,CAACE,IAAR,CAAaE,SAAb,CAAuBd,CAAC,GAAG,CAA3B,CAAZ;AACH;;AACD,gBAAIe,KAAK,GAAGL,OAAO,CAACM,IAAR,CAAaC,OAAb,CAAqB,QAArB,EAA+B,EAA/B,CAAZ;;AACA,gBAAIN,SAAS,IAAI,KAAb,IAAsBA,SAAS,IAAI,KAAnC,IAA4CA,SAAS,IAAI,MAAzD,IAAmEA,SAAS,IAAI,KAApF,EAA2F;AACvF;AAEAJ,cAAAA,QAAQ,IAAI,eAAeQ,KAAf,GAAuB,KAAnC;AACH,aAJD,MAIO;AAEHR,cAAAA,QAAQ,IAAI,kCAAkCQ,KAAlC,GAA0C,IAA1C,GAAiDL,OAAO,CAACE,IAAzD,GAAgE,WAA5E;AACH;AACJ,WAfD;AAgBA,eAAKM,SAAL,CAAeC,UAAf,CAA0BZ,QAA1B;AACH,SArBD,MAqBO;AACHF,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,UAAAA,OAAO,CAACC,GAAR,CAAYZ,IAAI,CAAC0B,KAAL,CAAW,CAAX,CAAZ;AACA,cAAIb,QAAQ,GAAG,EAAf,CAHG,CAKH;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEH,SA5CwC,CA8CzC;;AACH;AAjEK,KAHN,CAsEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA7EI,GAAR;AA+EH","sourcesContent":["import {\r\n    absoluteUrl,\r\n    checkIsLogin,\r\n    apiInstance\r\n} from '../../middleware/utils';\r\n\r\nexport function config(user) {\r\n\r\n    return ({\r\n        height: \"600px\",\r\n        readonly: false, // all options from https://xdsoft.net/jodit/doc/\r\n        uploader: {\r\n            url: \"/api/upload\",\r\n            insertImageAsBase64URI: false,\r\n            \"imagesExtensions\": [\r\n                \"jpg\",\r\n                \"png\",\r\n                \"jpeg\",\r\n                \"gif\"\r\n            ],\r\n            prepareData: function (data) {\r\n                if (user.type_user == 1) {\r\n                    data.append('id', \"admin\"); // \r\n\r\n                } else {\r\n                    data.append('id', user.organization_id); // \r\n\r\n                }\r\n            },\r\n            defaultHandlerSuccess: function (data, resp) {\r\n                var i, field = this.options.uploader.filesVariableName;\r\n\r\n\r\n\r\n\r\n                if (data.type === \"file\") {\r\n                    console.log(\"success file\")\r\n                    console.log(data)\r\n                    var textHTML = \"\";\r\n                    data.list.forEach(element => {\r\n                        var extension = \"\";\r\n                        var i = element.name.lastIndexOf('.');\r\n                        if (i > 0) {\r\n                            extension = element.name.substring(i + 1);\r\n                        }\r\n                        var _path = element.path.replace(\"public\", \"\");\r\n                        if (extension == \"jpg\" || extension == \"png\" || extension == \"jpeg\" || extension == \"gif\") {\r\n                            //your code\r\n\r\n                            textHTML += '<img src=\"' + _path + '\"/>'\r\n                        } else {\r\n\r\n                            textHTML += '<a class=\"file-attach\" href=\"' + _path + '\">' + element.name + '</a></br>'\r\n                        }\r\n                    });\r\n                    this.selection.insertHTML(textHTML);\r\n                } else {\r\n                    console.log(\"success image\")\r\n                    console.log(data.files[0])\r\n                    var textHTML = \"\";\r\n\r\n                    // if (data.files && data.files.length) {\r\n                    //   // for (i = 0; i < data.files.length; i += 1) {\r\n                    //   // textHTML += '<img src=\"' + data.baseurl + data.files[i] + '\"/>'\r\n                    //   // console.log( data.files[i])\r\n\r\n                    //   this.selection.insertImage(data.files[0]);\r\n                    //   this.selection.insertHTML(\"</br>\");\r\n\r\n                    //   // }\r\n                    // }\r\n                    // this.selection.insertHTML(textHTML);\r\n\r\n                }\r\n\r\n                // parent.selection.insertHTML('<img src=\"image.png\"/>');\r\n            },\r\n        },\r\n        // filebrowser: {\r\n        //   ajax: {\r\n        //     url: \"/public/uploads/c-admin/\",\r\n        //   },\r\n        //   uploader: {\r\n        //      url:\"/api/upload\"\r\n        //   },\r\n        // },\r\n    });\r\n}"]},"metadata":{},"sourceType":"module"}