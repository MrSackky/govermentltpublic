{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\govermentlt\\\\pages\\\\admin\\\\setting\\\\general\\\\management-holiday.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Button, Input, Modal, notification, Table } from 'antd';\nimport Link from 'next/link';\nimport Router from 'next/router'; // import UserNav from '../components/navigation/User';\n\nimport { useEffect, useState } from 'react';\n/* components */\n\nimport Layout from '../../../../components/layout/LayoutAdmin';\n/* utils */\n\nimport { apiInstance, convertDateDBtoDatePickerNoTime, convertDatetoThaiDate } from '../../../../middleware/utils';\nvar Search = Input.Search;\nexport var __N_SSP = true;\nexport default function Home(props) {\n  _s();\n\n  var _this = this;\n\n  var user = props.user,\n      origin = props.origin;\n\n  var _useState = useState(null),\n      login = _useState[0],\n      setLogin = _useState[1];\n\n  var _notification$useNoti = notification.useNotification(),\n      _notification$useNoti2 = _slicedToArray(_notification$useNoti, 2),\n      api = _notification$useNoti2[0],\n      contextHolder = _notification$useNoti2[1];\n\n  var _useState2 = useState(\"\"),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var _useState3 = useState([]),\n      data = _useState3[0],\n      setData = _useState3[1];\n\n  var _useState4 = useState(null),\n      dataDelete = _useState4[0],\n      setDataDelete = _useState4[1];\n\n  var _useState5 = useState(null),\n      filters = _useState5[0],\n      setFilters = _useState5[1];\n\n  var _useState6 = useState({\n    current: 1,\n    pageSize: 10\n  }),\n      pagination = _useState6[0],\n      setPagination = _useState6[1];\n\n  var _useState7 = useState(false),\n      loading = _useState7[0],\n      setLoading = _useState7[1];\n\n  var _useState8 = useState(false),\n      visibleModalDelete = _useState8[0],\n      setVisibleModalDelete = _useState8[1];\n\n  var columns = [{\n    title: 'ชื่อวันหยุด',\n    dataIndex: 'intro_title',\n    sorter: true // render: name => `${name.first} ${name.last}`,\n    // width: '20%',\n    // defaultSortOrder: 'descend',\n\n  }, {\n    title: 'ช่วงเวลาที่แสดง',\n    dataIndex: '',\n    sorter: true,\n    key: 'intro_date_s',\n    render: function render(data) {\n      return __jsx(React.Fragment, null, __jsx(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 5\n        }\n      }, \" \", convertDatetoThaiDate(convertDateDBtoDatePickerNoTime(data.intro_date_s)), \" \\u0E16\\u0E36\\u0E07 \", convertDatetoThaiDate(convertDateDBtoDatePickerNoTime(data.intro_date_e))));\n    } // render: name => `${name.first} ${name.last}`,\n    // width: '20%',\n    // defaultSortOrder: 'descend',\n\n  }, {\n    title: 'สถานะการใช้งาน',\n    dataIndex: '',\n    sorter: true,\n    key: 'is_use',\n    render: function render(data) {\n      return __jsx(React.Fragment, null, __jsx(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 5\n        }\n      }, \" \", data.is_use ? \"ใช้งาน\" : \"ไม่ใช้งาน\"));\n    } // render: name => `${name.first} ${name.last}`,\n    // width: '20%',\n    // defaultSortOrder: 'descend',\n\n  }, {\n    title: '',\n    dataIndex: '',\n    key: 'x',\n    render: function render(data) {\n      return __jsx(React.Fragment, null, __jsx(Button, {\n        type: \"primary\",\n        size: \"default\",\n        onClick: function onClick() {\n          return gotoPage(data.intro_id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 5\n        }\n      }, \" \\u0E41\\u0E01\\u0E49\\u0E44\\u0E02 \"), __jsx(Button, {\n        className: \"ml-1\",\n        type: \"danger\",\n        onClick: function onClick() {\n          return showModal(data);\n        },\n        size: \"default\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 5\n        }\n      }, \" \\u0E25\\u0E1A \"));\n    }\n  } // {\n  //   title: 'Gender',\n  //   dataIndex: 'gender',\n  //   // filters: [\n  //   //   { text: 'Male', value: 'male' },\n  //   //   { text: 'Female', value: 'female' },\n  //   // ],\n  //   width: '20%',\n  // },\n  // {\n  //   title: 'Email',\n  //   dataIndex: 'email',\n  // },\n  ];\n  useEffect(function () {\n    fetch({\n      pagination: pagination\n    });\n  }, []);\n\n  var fetch = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var params,\n          addactivitiesData,\n          _args = arguments;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              params = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n              setLoading(true);\n              _context.next = 4;\n              return apiInstance().get('admin/management/landing-page?isAdmin=1&results=' + params.pagination.pageSize + '&page=' + params.pagination.current + \"&search=\" + search + \"&sortField=\" + params.sortField + \"&sortOrder=\" + params.sortOrder + \"&filters=\" + params.filters);\n\n            case 4:\n              addactivitiesData = _context.sent;\n              setData(addactivitiesData.data.results);\n              setPagination(_objectSpread(_objectSpread({}, params.pagination), {}, {\n                total: addactivitiesData.data.totalCount // 200 is mock data, you should read it from server\n                // total: data.totalCount,\n\n              }));\n              setLoading(false);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetch() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var showModal = function showModal(data) {\n    console.log('data deletd');\n    console.log(data);\n    setDataDelete(data);\n    setVisibleModalDelete(true);\n  };\n\n  var gotoPage = function gotoPage(id) {\n    Router.push('/admin/setting/general/' + id);\n  };\n\n  var onSearch = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_search) {\n      var anding_pageData;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoading(true);\n              setSearch(_search);\n              setPagination({\n                pageSize: pagination.pageSize,\n                current: 1\n              });\n              _context2.next = 5;\n              return apiInstance().get('admin/management/landing-page?isAdmin=1&results=' + pagination.pageSize + '&page=1&search=' + _search + \"&filters=\" + filters);\n\n            case 5:\n              anding_pageData = _context2.sent;\n              setData(anding_pageData.data.results);\n              setLoading(false);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onSearch(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleTableChange = function handleTableChange(pagination, filters, sorter) {\n    console.log(sorter);\n    setPagination({\n      pageSize: pagination.pageSize,\n      current: pagination.current\n    });\n    setFilters(filters[\"package\"]);\n    fetch({\n      sortField: sorter.columnKey,\n      sortOrder: sorter.order,\n      pagination: pagination,\n      filters: filters[\"package\"]\n    });\n  };\n\n  var onDelete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var registerData;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return apiInstance()[\"delete\"]('admin/management/landing-page/' + dataDelete.intro_id, {});\n\n            case 2:\n              registerData = _context3.sent;\n\n              if (registerData.data.status == 200) {\n                openNotificationSuccess(); // fetchOrganizationData();\n\n                setVisibleModalDelete(false);\n                fetch({\n                  pagination: pagination\n                });\n              } else {\n                openNotificationFail(registerData.data.message);\n              }\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onDelete() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var hideModal = function hideModal() {\n    setVisibleModalDelete(false);\n  };\n\n  var openNotificationSuccess = function openNotificationSuccess() {\n    api.success({\n      message: \"\\u0E25\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\",\n      description: 'ลบข้อมูลสำเร็จ',\n      placement: 'topRight'\n    });\n  };\n\n  var openNotificationFail = function openNotificationFail(messgae) {\n    api.error({\n      message: \"\\u0E1E\\u0E1A\\u0E1B\\u0E31\\u0E0D\\u0E2B\\u0E32\\u0E23\\u0E30\\u0E2B\\u0E27\\u0E48\\u0E32\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\",\n      description: messgae,\n      placement: 'topRight'\n    });\n  };\n\n  return __jsx(Layout, {\n    titlePage: \"จัดการวันหยุด\",\n    isMain: true,\n    indexMenu: \"sub-6-3\",\n    title: \"Government - Admin management\",\n    url: origin,\n    origin: origin,\n    user: login,\n    props: props,\n    _routes: [{\n      path: '/admin/dashborad',\n      breadcrumbName: 'หน้าหลัก'\n    }, {\n      path: '/admin/setting/general',\n      breadcrumbName: 'จัดการหน้าวันหยุดพิเศษ'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 3\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 4\n    }\n  }, contextHolder, __jsx(\"div\", {\n    className: \"w-full lg:inline-flex justify-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"w-full lg:w-1/2 py-2 justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 6\n    }\n  }, __jsx(Link, {\n    href: \"/admin/setting/general/add-holiday\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }\n  }, __jsx(\"a\", {\n    //onClick={(e) => handleLogout(e)}\n    className: \"lg:inline-flex lg:w-auto px-2 py-2 rounded h-8 text-white bg-green-600 font-bold items-center justify-center hover:bg-green-600 hover:text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 8\n    }\n  }, \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E27\\u0E31\\u0E19\\u0E2B\\u0E22\\u0E38\\u0E14\"))), __jsx(\"div\", {\n    className: \"text-right w-full justify-items-end lg:w-auto py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 6\n    }\n  }, __jsx(Search, {\n    placeholder: \"input search text\",\n    onSearch: onSearch,\n    enterButton: true,\n    allowClear: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }))), __jsx(Table, {\n    columns: columns,\n    rowKey: function rowKey(record) {\n      return record.organization_id;\n    },\n    dataSource: data,\n    pagination: pagination,\n    loading: loading,\n    onChange: handleTableChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 5\n    }\n  })), __jsx(Modal, {\n    title: \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?\",\n    visible: visibleModalDelete,\n    onOk: onDelete,\n    onCancel: hideModal,\n    okText: \"\\u0E25\\u0E1A\",\n    cancelText: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",\n    okButtonProps: {\n      'type': \"primary\",\n      'danger': true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 4\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 5\n    }\n  }, \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E25\\u0E1A \\\"\", dataDelete ? dataDelete.intro_title : \"\", \"\\\" \\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?  \")));\n}\n/* getServerSideProps */\n\n_s(Home, \"qskOsnV2pkk4GSiHmIq9riaBXtQ=\", false, function () {\n  return [notification.useNotification];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["D:/govermentlt/pages/admin/setting/general/management-holiday.js"],"names":["Button","Input","Modal","notification","Table","Link","Router","useEffect","useState","Layout","apiInstance","convertDateDBtoDatePickerNoTime","convertDatetoThaiDate","Search","Home","props","user","origin","login","setLogin","useNotification","api","contextHolder","search","setSearch","data","setData","dataDelete","setDataDelete","filters","setFilters","current","pageSize","pagination","setPagination","loading","setLoading","visibleModalDelete","setVisibleModalDelete","columns","title","dataIndex","sorter","key","render","intro_date_s","intro_date_e","is_use","gotoPage","intro_id","showModal","fetch","params","get","sortField","sortOrder","addactivitiesData","results","total","totalCount","console","log","id","push","onSearch","_search","anding_pageData","handleTableChange","columnKey","order","onDelete","registerData","status","openNotificationSuccess","openNotificationFail","message","hideModal","success","description","placement","messgae","error","path","breadcrumbName","record","organization_id","intro_title"],"mappings":"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","sourcesContent":["import {\r\n\tButton, Input, Modal, notification, Table\r\n} from 'antd';\r\nimport Link from 'next/link';\r\nimport Router from 'next/router';\r\n// import UserNav from '../components/navigation/User';\r\nimport { useEffect, useState } from 'react';\r\n/* components */\r\nimport Layout from '../../../../components/layout/LayoutAdmin';\r\n/* utils */\r\nimport { absoluteUrl, apiInstance, convertDateDBtoDatePickerNoTime, convertDatetoThaiDate } from '../../../../middleware/utils';\r\n\r\n\r\nconst { Search } = Input;\r\n\r\nexport default function Home(props) {\r\n\tconst { user, origin } = props;\r\n\tconst [login, setLogin] = useState(null)\r\n\tconst [api, contextHolder] = notification.useNotification();\r\n\tconst [search, setSearch] = useState(\"\")\r\n\tconst [data, setData] = useState([])\r\n\tconst [dataDelete, setDataDelete] = useState(null)\r\n\tconst [filters, setFilters] = useState(null)\r\n\tconst [pagination, setPagination] = useState({\r\n\t\tcurrent: 1,\r\n\t\tpageSize: 10,\r\n\t})\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [visibleModalDelete, setVisibleModalDelete] = useState(false)\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'ชื่อวันหยุด',\r\n\t\t\tdataIndex: 'intro_title',\r\n\t\t\tsorter: true,\r\n\t\t\t// render: name => `${name.first} ${name.last}`,\r\n\t\t\t// width: '20%',\r\n\t\t\t// defaultSortOrder: 'descend',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'ช่วงเวลาที่แสดง',\r\n\t\t\tdataIndex: '',\r\n\t\t\tsorter: true,\r\n\t\t\tkey: 'intro_date_s',\r\n\t\t\trender: (data) => <>\r\n\t\t\t\t<span > {convertDatetoThaiDate(convertDateDBtoDatePickerNoTime(data.intro_date_s))} ถึง {convertDatetoThaiDate(convertDateDBtoDatePickerNoTime(data.intro_date_e))}</span>\r\n\t\t\t</>,\r\n\t\t\t// render: name => `${name.first} ${name.last}`,\r\n\t\t\t// width: '20%',\r\n\t\t\t// defaultSortOrder: 'descend',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'สถานะการใช้งาน',\r\n\t\t\tdataIndex: '',\r\n\t\t\tsorter: true,\r\n\t\t\tkey: 'is_use',\r\n\t\t\trender: (data) => <>\r\n\t\t\t\t<span > {data.is_use ? \"ใช้งาน\" : \"ไม่ใช้งาน\"}</span>\r\n\t\t\t</>,\r\n\t\t\t// render: name => `${name.first} ${name.last}`,\r\n\t\t\t// width: '20%',\r\n\t\t\t// defaultSortOrder: 'descend',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '',\r\n\t\t\tdataIndex: '',\r\n\t\t\tkey: 'x',\r\n\t\t\trender: (data) => <>\r\n\t\t\t\t<Button type=\"primary\" size={\"default\"} onClick={() => gotoPage(data.intro_id)} > แก้ไข </Button>\r\n\t\t\t\t<Button className=\"ml-1\" type=\"danger\" onClick={() => showModal(data)} size={\"default\"} > ลบ </Button>\r\n\t\t\t</>,\r\n\t\t},\r\n\t\t// {\r\n\t\t//   title: 'Gender',\r\n\t\t//   dataIndex: 'gender',\r\n\t\t//   // filters: [\r\n\t\t//   //   { text: 'Male', value: 'male' },\r\n\t\t//   //   { text: 'Female', value: 'female' },\r\n\t\t//   // ],\r\n\t\t//   width: '20%',\r\n\t\t// },\r\n\t\t// {\r\n\t\t//   title: 'Email',\r\n\t\t//   dataIndex: 'email',\r\n\t\t// },\r\n\t];\r\n\r\n\tuseEffect(() => {\r\n\t\tfetch({ pagination });\r\n\t}, [])\r\n\r\n\tconst fetch = async (params = {}) => {\r\n\t\tsetLoading(true)\r\n\t\tconst addactivitiesData = await apiInstance().get(\r\n\t\t\t'admin/management/landing-page?isAdmin=1&results=' + params.pagination.pageSize + '&page=' + params.pagination.current + \"&search=\" + search + \"&sortField=\" + params.sortField + \"&sortOrder=\" + params.sortOrder + \"&filters=\" + params.filters\r\n\t\t);\r\n\r\n\t\tsetData(addactivitiesData.data.results)\r\n\t\tsetPagination({\r\n\t\t\t...params.pagination,\r\n\t\t\ttotal: addactivitiesData.data.totalCount,\r\n\t\t\t// 200 is mock data, you should read it from server\r\n\t\t\t// total: data.totalCount,\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t};\r\n\r\n\tconst showModal = (data) => {\r\n\t\tconsole.log('data deletd')\r\n\t\tconsole.log(data)\r\n\t\tsetDataDelete(data)\r\n\t\tsetVisibleModalDelete(true)\r\n\t};\r\n\r\n\tconst gotoPage = (id) => {\r\n\t\tRouter.push('/admin/setting/general/' + id);\r\n\t};\r\n\r\n\tconst onSearch = async (_search) => {\r\n\t\tsetLoading(true)\r\n\t\tsetSearch(_search)\r\n\t\tsetPagination({\r\n\t\t\tpageSize: pagination.pageSize,\r\n\t\t\tcurrent: 1\r\n\t\t})\r\n\t\tconst anding_pageData = await apiInstance().get(\r\n\t\t\t'admin/management/landing-page?isAdmin=1&results=' + pagination.pageSize + '&page=1&search=' + _search + \"&filters=\" + filters\r\n\t\t);\r\n\r\n\t\tsetData(anding_pageData.data.results)\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tconst handleTableChange = (pagination, filters, sorter) => {\r\n\t\tconsole.log(sorter)\r\n\t\tsetPagination({\r\n\t\t\tpageSize: pagination.pageSize,\r\n\t\t\tcurrent: pagination.current\r\n\t\t})\r\n\t\tsetFilters(filters.package)\r\n\t\tfetch({\r\n\t\t\tsortField: sorter.columnKey,\r\n\t\t\tsortOrder: sorter.order,\r\n\t\t\tpagination,\r\n\t\t\tfilters: filters.package,\r\n\t\t});\r\n\t};\r\n\r\n\tconst onDelete = async () => {\r\n\t\t// console.log('DELETE')\r\n\t\t// const data = {\r\n\t\t//   'organization_name': value.organization_name,\r\n\t\t// }\r\n\t\t// console.log(data)\r\n\t\tconst registerData = await apiInstance().delete('admin/management/landing-page/' + dataDelete.intro_id, {});\r\n\t\tif (registerData.data.status == 200) {\r\n\t\t\topenNotificationSuccess()\r\n\t\t\t// fetchOrganizationData();\r\n\t\t\tsetVisibleModalDelete(false)\r\n\t\t\tfetch({ pagination });\r\n\t\t} else {\r\n\t\t\topenNotificationFail(registerData.data.message)\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tconst hideModal = () => {\r\n\t\tsetVisibleModalDelete(false)\r\n\t};\r\n\r\n\r\n\tconst openNotificationSuccess = () => {\r\n\t\tapi.success({\r\n\t\t\tmessage: `ลบข้อมูลสำเร็จ`,\r\n\t\t\tdescription: 'ลบข้อมูลสำเร็จ',\r\n\t\t\tplacement: 'topRight',\r\n\t\t});\r\n\t};\r\n\r\n\tconst openNotificationFail = (messgae) => {\r\n\t\tapi.error({\r\n\t\t\tmessage: `พบปัญหาระหว่างการลบข้อมูล`,\r\n\t\t\tdescription: messgae,\r\n\t\t\tplacement: 'topRight',\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Layout titlePage={\"จัดการวันหยุด\"} isMain={true} indexMenu={\"sub-6-3\"} title=\"Government - Admin management\" url={origin} origin={origin} user={login} props={props}\r\n\t\t\t_routes={[\r\n\t\t\t\t{\r\n\t\t\t\t\tpath: '/admin/dashborad',\r\n\t\t\t\t\tbreadcrumbName: 'หน้าหลัก',\r\n\t\t\t\t}, {\r\n\t\t\t\t\tpath: '/admin/setting/general',\r\n\t\t\t\t\tbreadcrumbName: 'จัดการหน้าวันหยุดพิเศษ',\r\n\t\t\t\t}]}\r\n\t\t>\r\n\t\t\t<div>\r\n\t\t\t\t{contextHolder}\r\n\t\t\t\t<div className=\"w-full lg:inline-flex justify-between\">\r\n\t\t\t\t\t<div className=\"w-full lg:w-1/2 py-2 justify-center\">\r\n\t\t\t\t\t\t<Link href=\"/admin/setting/general/add-holiday\">\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t//onClick={(e) => handleLogout(e)}\r\n\t\t\t\t\t\t\t\tclassName=\"lg:inline-flex lg:w-auto px-2 py-2 rounded h-8 text-white bg-green-600 font-bold items-center justify-center hover:bg-green-600 hover:text-white\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tเพิ่มวันหยุด\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"text-right w-full justify-items-end lg:w-auto py-2\">\r\n\t\t\t\t\t\t<Search placeholder=\"input search text\"\r\n\t\t\t\t\t\t\tonSearch={onSearch}\r\n\t\t\t\t\t\t\tenterButton\r\n\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\trowKey={record => record.organization_id}\r\n\t\t\t\t\tdataSource={data}\r\n\t\t\t\t\tpagination={pagination}\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\tonChange={handleTableChange}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Modal\r\n\t\t\t\ttitle=\"คุณต้องการลบข้อมูลหรือไม่?\"\r\n\t\t\t\tvisible={visibleModalDelete}\r\n\t\t\t\tonOk={onDelete}\r\n\t\t\t\tonCancel={hideModal}\r\n\t\t\t\tokText=\"ลบ\"\r\n\t\t\t\tcancelText=\"ยกเลิก\"\r\n\t\t\t\tokButtonProps={{\r\n\t\t\t\t\t'type': \"primary\",\r\n\t\t\t\t\t'danger': true\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<p>คุณต้องการลบ \"{dataDelete ? dataDelete.intro_title : \"\"}\" หรือไม่?  </p>\r\n\r\n\t\t\t</Modal>\r\n\r\n\r\n\t\t</Layout >\r\n\t);\r\n}\r\n/* getServerSideProps */\r\nexport async function getServerSideProps(context) {\r\n\tconst { req } = context;\r\n\tconst { origin } = absoluteUrl(req);\r\n\r\n\treturn {\r\n\t\tprops: {\r\n\t\t\torigin,\r\n\t\t},\r\n\t};\r\n}\r\n"]},"metadata":{},"sourceType":"module"}